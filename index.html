<!DOCTYPE html>
<html lang="ar" dir="rtl" id="html-root">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø±Ø­Ù„Ø© 6Ps - Ø§ÙƒØªØ´Ù Ù…ÙŠÙˆÙ„Ùƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ© | 6Ps Journey - Discover Your Career Passions</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #052ed8;
      --green: #00c309;
      --yellow: #f1c900;
      --background: #f8faff;
      --card-bg: #ffffff;
      --text: #0f172a;
      --text-light: #64748b;
      --border: #e2e8f0;
      --error: #ef4444;
      --radius: 12px;
      --shadow: 0 4px 12px rgba(5, 46, 216, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Tajawal', sans-serif;
      background: var(--background);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      transition: all 0.3s ease;
    }

    body.en {
      font-family: 'Inter', sans-serif;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .language-switcher {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1001;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 25px;
      padding: 10px 20px;
      font-family: inherit;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .language-switcher:hover {
      background: #041db8;
      transform: translateY(-2px);
    }

    .language-switcher .flag {
      font-size: 1.2rem;
    }

    h1 {
      font-size: clamp(1.8rem, 4vw, 2.5rem);
      text-align: center;
      margin: 2rem 0;
      color: var(--primary);
      font-weight: 700;
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
      overflow: hidden;
      border: 1px solid var(--border);
    }

    .card-header {
      padding: 1.5rem;
      background: var(--primary);
      color: white;
    }

    .card-title {
      font-size: 2rem;
      font-weight: 600;
      text-align: center;
    }

    .card-description {
      color: var(--yellow);
      font-size: 20px;
      font-weight: bold;
      display: flex;
      align-items:center;
      justify-content: center;
      gap: 0.5rem;
    }

    .stage-info-button {
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.3);
      color: white;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      flex-shrink: 0;
    }

    .stage-info-button:hover {
      background: rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
      transform: scale(1.1);
    }

    .card-content {
      padding: 1.5rem;
    }

    .card-footer {
      padding: 1.5rem;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
      background: #f8fafc;
    }

    .input-group {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .input-wrapper {
      flex: 1;
      position: relative;
      min-width: 250px;
    }

    .input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      font-family: inherit;
      font-size: 1rem;
      transition: border-color 0.2s ease;
    }

    .input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .hint-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: var(--yellow);
      border: none;
      cursor: pointer;
      color: #333;
      font-size: 1rem;
      padding: 6px;
      border-radius: 50%;
      transition: all 0.2s ease;
      z-index: 10;
    }

    [dir="rtl"] .hint-button {
      left: 10px;
    }

    [dir="ltr"] .hint-button {
      right: 10px;
    }

    .hint-button:hover {
      transform: translateY(-50%) scale(1.1);
    }

    .hint-tooltip {
      position: absolute;
      bottom: 100%;
      margin-bottom: 10px;
      background: var(--text);
      color: white;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 0.85rem;
      line-height: 1.4;
      width: 280px;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    [dir="rtl"] .hint-tooltip {
      left: -10px;
      text-align: right;
    }

    [dir="ltr"] .hint-tooltip {
      right: -10px;
      text-align: left;
    }

    .hint-tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      border: 6px solid transparent;
      border-top-color: var(--text);
    }

    [dir="rtl"] .hint-tooltip::after {
      left: 20px;
    }

    [dir="ltr"] .hint-tooltip::after {
      right: 20px;
    }

    .hint-button:hover .hint-tooltip {
      opacity: 1;
      visibility: visible;
    }

    .select {
      padding: 0.75rem 1rem;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      font-family: inherit;
      font-size: 1rem;
      background: white;
      min-width: 140px;
      cursor: pointer;
    }

    .select:focus {
      outline: none;
      border-color: var(--green);
    }

    .button {
      background: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      padding: 0.75rem 1.5rem;
      font-family: inherit;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      min-width: 120px;
    }

    .button:hover {
      background: #041db8;
      transform: translateY(-1px);
    }

    .button:disabled {
      background: #cacaca;
      color: white;
      cursor: not-allowed;
      transform: none;
      border: none !important; /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø¹Ù†Ø¯ Ø§Ù„ØªØ¹Ø·ÙŠÙ„ */
      opacity: 0.7;
    }

    .button-outline {
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .button-outline:hover {
      background: var(--primary);
      color: white;
    }

    .button-success {
      background: var(--green);
    }

    .button-success:hover {
      background: #009907;
    }

    .button-warning {
      background: var(--yellow);
      color: #333;
    }

    .button-warning:hover {
      background: #d1a800;
    }

    .table-container {
      overflow-x: auto;
      margin: 1rem 0;
      border-radius: var(--radius);
      border: 1px solid var(--border);
    }

    .table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      min-width: 600px;
    }

    .table th,
    .table td {
      padding: 1rem;
      border-bottom: 1px solid var(--border);
    }

    [dir="rtl"] .table th,
    [dir="rtl"] .table td {
      text-align: right;
    }

    [dir="ltr"] .table th,
    [dir="ltr"] .table td {
      text-align: left;
    }

    .table th {
      background: var(--primary);
      color: white;
      font-weight: 600;
      font-size: 0.9rem;
      white-space: nowrap;
    }

    .table tr:hover {
      background: #f8fafc;
    }

    .table-actions {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
    }

    .action-button {
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      padding: 0.4rem;
      cursor: pointer;
      font-size: 0.8rem;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
    }

    .action-button:hover {
      transform: translateY(-1px);
    }

    .delete-button {
      background: var(--error);
    }

    .action-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .alert {
      padding: 1rem;
      border-radius: var(--radius);
      margin-bottom: 1rem;
      display: none;
      font-weight: 500;
      background: rgba(239, 68, 68, 0.1);
      color: var(--error);
      border: 1px solid rgba(239, 68, 68, 0.2);
    }

    .progress-container {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 4px;
      margin-bottom: 1rem;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background: white;
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    .progress-text {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 1rem;
      font-weight: 500;
    }

    .guiding-question {
      font-size: 1.1rem;
      font-weight: bold;
      color: var(--primary);
      margin-bottom: 1.5rem;
      padding: 1.5rem;
      background: #f0f4ff;
      border-radius: var(--radius);
    }

    [dir="rtl"] .guiding-question {
      border-right: 4px solid var(--primary);
    }

    [dir="ltr"] .guiding-question {
      border-left: 4px solid var(--primary);
    }

    .stage-explanation {
      background: linear-gradient(135deg, #e8f5e8, #f0f8ff);
      border: 2px solid var(--green);
      border-radius: var(--radius);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      font-size: 0.95rem;
      line-height: 1.6;
    }

    .stage-explanation h4 {
      color: var(--green);
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .stage-explanation ul {
      margin: 0.8rem 0;
      padding-right: 1.5rem;
    }

    [dir="ltr"] .stage-explanation ul {
      padding-left: 1.5rem;
      padding-right: 0;
    }

    .stage-explanation li {
      margin-bottom: 0.4rem;
      color: var(--text);
    }

    .suggestions-container {
      background: #f8fafc;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .suggestions-title {
      color: var(--primary);
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .suggestions-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      align-items: flex-start;
    }

    .suggestion-chip {
      background: white;
      border: 2px solid var(--border);
      border-radius: 25px;
      padding: 0.5rem 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
      max-width: 300px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .suggestion-chip:hover {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(5, 46, 216, 0.3);
    }

    .suggestion-text {
      flex: 1;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .suggestion-level {
      background: var(--primary);
      color: white;
      padding: 0.2rem 0.5rem;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      min-width: 60px;
      text-align: center;
      flex-shrink: 0;
    }

    .suggestion-level.high {
      background: var(--green);
    }

    .suggestion-level.medium {
      background: var(--yellow);
      color: #333;
    }

    .suggestion-level.low {
      background: #e2e8f0;
      color: var(--text);
    }

    .suggestion-chip:hover .suggestion-level {
      background: rgba(255, 255, 255, 0.2);
      color: white;
    }

    .no-suggestions {
      color: var(--text-light);
      font-style: italic;
      text-align: center;
      padding: 2rem;
      background: #f9f9f9;
      border-radius: var(--radius);
      border: 2px dashed var(--border);
    }

    .hidden {
      display: none;
    }

    .result-highlight {
      background: #f0f4ff;
      padding: 1.5rem;
      border-radius: var(--radius);
      margin: 1.5rem 0;
      border: 2px solid var(--primary);
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    .section-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin: 2rem 0 1rem;
      color: var(--primary);
      border-bottom: 2px solid var(--green);
      padding-bottom: 0.5rem;
    }

    .toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--primary);
      color: white;
      padding: 1rem 2rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      text-align: center;
      font-weight: 500;
    }

    .toast.show {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(10px);
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: white;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--primary);
      color: white;
    }

    .modal-title {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .modal-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0.5rem;
      border-radius: 50%;
    }

    .modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .modal-body {
      padding: 1.5rem;
    }

    .modal-footer {
      padding: 1.5rem;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .stage-info-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .stage-info-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .stage-info-content {
      background: white;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .stage-info-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--primary);
      color: white;
    }

    .stage-info-title {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .stage-info-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0.5rem;
      border-radius: 50%;
    }

    .stage-info-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .stage-info-body {
      padding: 1.5rem;
    }

    .print-only {
      display: none;
    }

    .icon {
      display: inline-block;
      width: 16px;
      height: 16px;
      stroke-width: 0;
      stroke: currentColor;
      fill: currentColor;
    }

    .best-result {
      background: #e8f5e8 !important;
      color: var(--green) !important;
      font-weight: bold !important;
    }

    .logo-image {
      width: 250px;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: auto;
    }

    /* Print styles */
    @media print {
      * {
        -webkit-print-color-adjust: exact !important;
        color-adjust: exact !important;
      }

      body {
        background: white !important;
        font-size: 12pt;
        margin: 0;
        padding: 0;
        color: black;
      }

      .language-switcher {
        display: none !important;
      }

      .container {
        width: 100%;
        max-width: none;
        padding: 20px;
        margin: 0 auto;
      }

      .print-content {
        width: 100%;
        margin: 0 auto;
        text-align: center;
      }

      .print-section {
        width: 100%;
        margin-bottom: 30px;
        page-break-inside: avoid;
        text-align: center;
      }

      .print-header {
        text-align: center;
        margin-bottom: 30px;
        border-bottom: 3px solid #052ed8;
        padding-bottom: 20px;
      }

      .print-header h1 {
        color: #052ed8 !important;
        font-size: 24pt;
        margin-bottom: 10px;
        font-weight: bold;
      }

      table {
        width: 90%;
        margin: 20px auto;
        border-collapse: collapse;
        font-size: 11pt;
        border: 1px solid #ddd;
      }

      th, td {
        padding: 12px 8px;
        border: 1px solid #ddd;
        text-align: center;
      }

      th {
        background-color: #f0f4ff !important;
        color: #052ed8 !important;
        font-weight: bold;
      }

      .best-result {
        background-color: #e8f5e8 !important;
        color: #00c309 !important;
        font-weight: bold !important;
      }

      .print-passion-section {
        width: 90%;
        margin: 0 auto 40px auto;
        border: 2px solid #052ed8;
        border-radius: 8px;
        padding: 20px;
        page-break-inside: avoid;
        background: #fafbff;
      }

      .print-passion-title {
        color: #052ed8 !important;
        font-size: 16pt;
        font-weight: bold;
        margin-bottom: 15px;
        text-align: center;
        border-bottom: 2px solid #00c309;
        padding-bottom: 8px;
      }

      .print-stage-section {
        margin-bottom: 25px;
        padding: 15px;
        background: white;
        border-radius: 6px;
        border: 1px solid #e0e7ff;
        page-break-inside: avoid;
      }

      .print-stage-title {
        color: #00c309 !important;
        font-size: 14pt;
        font-weight: bold;
        margin-bottom: 15px;
        text-align: center;
        border-bottom: 1px dashed #e0e7ff;
        padding-bottom: 8px;
      }

      .print-question {
        font-style: italic;
        color: #666 !important;
        margin-bottom: 15px;
        font-size: 11pt;
        background-color: #f8f9ff;
        padding: 12px;
        border-radius: 6px;
        line-height: 1.5;
      }

      [dir="rtl"] .print-question {
        text-align: right;
      }

      [dir="ltr"] .print-question {
        text-align: left;
      }

      .print-answers {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .print-answer-item {
        margin-bottom: 10px;
        font-size: 11pt;
        padding: 10px 15px;
        background: #f9f9f9;
        border-radius: 4px;
      }

      [dir="rtl"] .print-answer-item {
        text-align: right;
        border-right: 3px solid #052ed8;
        padding-right: 15px;
      }

      [dir="ltr"] .print-answer-item {
        text-align: left;
        border-left: 3px solid #052ed8;
        padding-left: 15px;
      }

      .print-answer-rating {
        font-weight: bold;
        color: #052ed8;
        display: inline-block;
        margin-right: 5px;
      }

      .print-total {
        background: #fff3cd !important;
        border: 2px solid #f1c900 !important;
        color: #856404 !important;
        padding: 12px;
        text-align: center;
        font-weight: bold;
        border-radius: 6px;
        margin-top: 20px;
        font-size: 13pt;
      }

      .print-recommendation {
        background: #e8f5e8 !important;
        border: 3px solid #00c309 !important;
        color: #00c309 !important;
        padding: 20px;
        text-align: center;
        font-weight: bold;
        border-radius: 10px;
        margin: 20px auto;
        font-size: 15pt;
        width: 80%;
      }

      .print-hint {
        background: #fff3cd !important;
        border: 2px solid #f1c900 !important;
        color: #856404 !important;
        padding: 15px;
        border-radius: 8px;
        margin: 15px auto;
        line-height: 1.6;
        font-size: 12pt;
        width: 80%;
      }

      [dir="rtl"] .print-hint {
        text-align: right;
      }

      [dir="ltr"] .print-hint {
        text-align: left;
      }

      .no-print {
        display: none !important;
      }

      .print-only {
        display: block !important;
      }

      @page {
        margin: 2cm;
        size: A4;
      }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }

      .language-switcher {
        top: 10px;
        right: 10px;
        padding: 8px 16px;
        font-size: 0.8rem;
      }

      h1 {
        font-size: 1.8rem;
        margin: 1rem 0;
      }

      .card-header,
      .card-content,
      .card-footer {
        padding: 1rem;
      }

      .card-footer {
        flex-direction: column-reverse;
        align-items: stretch;
      }

      .card-footer .button {
        width: 100%;
        margin-bottom: 0.5rem;
      }

      .input-group {
        flex-direction: column;
        align-items: stretch;
      }

      .input-wrapper {
        min-width: auto;
      }

      .select {
        width: 50%;
        min-width: auto;
      }

      .button {
        width: 60%;
        min-width: auto;
      }

      .table-container {
        margin: 0.5rem 0;
      }

      .table {
        min-width: auto;
        font-size: 0.85rem;
      }

      .table th,
      .table td {
        padding: 0.5rem 0.3rem;
        font-size: 0.8rem;
      }

      .table th {
        font-size: 0.75rem;
      }

      .table-actions {
        flex-direction: row;
        gap: 0.25rem;
      }

      .action-button {
        width: 28px;
        height: 28px;
        font-size: 0.7rem;
      }

      .hint-tooltip {
        width: 250px;
        font-size: 0.8rem;
      }

      [dir="rtl"] .hint-tooltip {
        left: -50px;
      }

      [dir="ltr"] .hint-tooltip {
        right: -50px;
      }

      .progress-text {
        font-size: 0.8rem;
      }
      .card-title{
        font-size: 1.5rem;
      }
      .card-description{
        font-size: 15px;
        padding: 5px 15px;
      font-weight: bold;      }
      .guiding-question {
        font-size: 1.2rem;
        font-weight: 800;
        padding: 1rem;
      }

      .result-highlight {
        font-size: 1.1rem;
        padding: 1rem;
      }

      .modal {
        width: 95%;
        margin: 10px;
      }

      .modal-footer {
        flex-direction: column;
      }

      .modal-footer .button {
        width: 100%;
      }

      .suggestions-grid {
        gap: 0.5rem;
      }

      .suggestion-chip {
        font-size: 0.8rem;
        padding: 0.4rem 0.8rem;
        max-width: 250px;
      }

      .suggestion-text {
        max-width: 150px;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 10px;
      }

      h1 {
        font-size: 1.5rem;
      }

      .card-header,
      .card-content,
      .card-footer {
        padding: 0.75rem;
      }

      .table th,
      .table td {
        padding: 10px 15px;
        font-size: 0.75rem;
      }

      .table th {
        font-size: 0.7rem;
      }

      .action-button {
        width: 24px;
        height: 24px;
      }

      .hint-tooltip {
        width: 200px;
      }

      [dir="rtl"] .hint-tooltip {
        left: -80px;
      }

      [dir="ltr"] .hint-tooltip {
        right: -80px;
      }

      .suggestion-chip {
        font-size: 0.75rem;
        padding: 0.3rem 0.6rem;
        max-width: 200px;
      }

      .suggestion-text {
        max-width: 120px;
      }
    }

    /* Ø¥Ø¶Ø§ÙØ© Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© */
    .current-stage-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1001;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .current-stage-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .current-stage-content {
      background: white;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 2rem;
      text-align: center;
      transform: scale(0.9);
      transition: transform 0.3s ease;
      max-width: 90%;
      width: 500px;
    }

    .current-stage-modal.active .current-stage-content {
      transform: scale(1);
    }

    .current-stage-title {
      color: var(--primary);
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }

    .current-stage-description {
      color: var(--text);
      font-size: 1.2rem;
      line-height: 1.6;
    }

    .button-outline:disabled {
      background: #cacaca !important;
      color: white !important;
      border: none !important;
    }

    .suggestion-level.low {
      background: #ef4444!important; 
      color: #fff !important;
    }
    .suggestion-level.medium {
      background: #f1c900 !important; 
      color: #333 !important;
    }
    .suggestion-level.high {
      background: #00c309  !important; 
      color: #fff !important;
    }
  </style>
</head>
<body>
  <button class="language-switcher" onclick="toggleLanguage()">
    <span class="flag">ğŸ‡ºğŸ‡¸</span>
    <span class="text">English</span>
  </button>

  <div class="container">
    <img src="/placeholder.svg?height=100&width=250" alt="Logo Qudraat Shabab" class="logo-image">
    <h1 data-ar="Ø§ÙƒØªØ´Ù Ù…ÙŠÙˆÙ„Ùƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ©" data-en="Discover Your Career Passion">Ø§ÙƒØªØ´Ù Ø´ØºÙÙƒ Ø§Ù„Ù…Ù‡Ù†ÙŠ</h1>

    <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø´ØºÙ -->
    <div id="passion-selection" class="card">
      <div class="card-header">
        <h2 class="card-title" data-ar="Ù…Ø§ Ù‡ÙŠ Ø§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙƒØŸ" data-en="What are your Passion">Ù…Ø§ Ù‡ÙŠ Ø§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙƒØŸ</h2>
        <p class="card-description" data-ar="Ø§Ø®ØªØ± 3-6 Ù…Ø¬Ø§Ù„Ø§Øª ØªÙ‡ØªÙ… Ø¨Ù‡Ø§ (Ù…Ø«Ù„: Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø§Ù„ØªØµÙ…ÙŠÙ…ØŒ Ø§Ù„Ø·Ø¨Ø®)" data-en="Choose 3-6 areas you're interested in (e.g., Programming, Design, Cooking)">Ø§Ø®ØªØ± 3-6 Ù…Ø¬Ø§Ù„Ø§Øª ØªÙ‡ØªÙ… Ø¨Ù‡Ø§ (Ù…Ø«Ù„: Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø§Ù„ØªØµÙ…ÙŠÙ…ØŒ Ø§Ù„Ø·Ø¨Ø®)</p>
      </div>
      <div class="card-content">
        <div id="passion-error" class="alert" data-ar="ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… ØµØ­ÙŠØ­ ÙˆØºÙŠØ± Ù…ÙƒØ±Ø±" data-en="Please enter a valid and unique name">ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… ØµØ­ÙŠØ­ ÙˆØºÙŠØ± Ù…ÙƒØ±Ø±</div>
        <div class="input-group">
          <div class="input-wrapper">
            <input type="text" id="passion-input" class="input" data-ar="Ø§ÙƒØªØ¨ Ø§Ù‡ØªÙ…Ø§Ù…Ùƒ Ù‡Ù†Ø§" data-en="Type your interest here" placeholder="Ø§ÙƒØªØ¨ Ø§Ù‡ØªÙ…Ø§Ù…Ùƒ Ù‡Ù†Ø§">
            <button class="hint-button" type="button">
              ğŸ’¡
              <div class="hint-tooltip" data-ar="Ø£Ù…Ø«Ù„Ø©: Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø§Ù„ØªØµÙ…ÙŠÙ…ØŒ Ø§Ù„ØªØ¯Ø±ÙŠØ³ØŒ Ø§Ù„Ø·Ø¨Ø®ØŒ Ø§Ù„ÙƒØªØ§Ø¨Ø©ØŒ Ø§Ù„ØªØµÙˆÙŠØ±ØŒ Ø§Ù„Ø±ÙŠØ§Ø¶Ø©ØŒ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ØŒ Ø±ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ØŒ Ø§Ù„Ø·Ø¨ØŒ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©ØŒ Ø§Ù„ØªØ³ÙˆÙŠÙ‚" data-en="Examples: Programming, Design, Teaching, Cooking, Writing, Photography, Sports, Music, Entrepreneurship, Medicine, Engineering, Marketing">
                Ø£Ù…Ø«Ù„Ø©: Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø§Ù„ØªØµÙ…ÙŠÙ…ØŒ Ø§Ù„ØªØ¯Ø±ÙŠØ³ØŒ Ø§Ù„Ø·Ø¨Ø®ØŒ Ø§Ù„ÙƒØªØ§Ø¨Ø©ØŒ Ø§Ù„ØªØµÙˆÙŠØ±ØŒ Ø§Ù„Ø±ÙŠØ§Ø¶Ø©ØŒ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ØŒ Ø±ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ØŒ Ø§Ù„Ø·Ø¨ØŒ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©ØŒ Ø§Ù„ØªØ³ÙˆÙŠÙ‚
              </div>
            </button>
          </div>
          <button id="add-passion" class="button" data-ar="Ø¥Ø¶Ø§ÙØ©" data-en="Add">Ø¥Ø¶Ø§ÙØ©</button>
        </div>
        <div class="table-container">
          <table id="passion-table" class="table">
            <thead>
              <tr>
                <th data-ar="Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…" data-en="Interest">Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…</th>
                <th data-ar="Ø§Ù„ØªØ±ØªÙŠØ¨" data-en="Order">Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                <th data-ar="Ø®ÙŠØ§Ø±Ø§Øª" data-en="Options">Ø®ÙŠØ§Ø±Ø§Øª</th>
              </tr>
            </thead>
            <tbody id="passion-list"></tbody>
          </table>
        </div>
      </div>
      <div class="card-footer">
        <button id="start-journey" class="button button-success" disabled data-ar="Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±" data-en="Start Test">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
      </div>
    </div>

    <!-- Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
    <div id="question-section" class="card hidden">
      <div class="card-header">
        <div class="progress-container">
          <div id="progress-bar" class="progress-bar" style="width: 0%"></div>
        </div>
        <div class="progress-text">
          <span id="progress-text">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 30</span>
          <span id="remaining-text">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 29</span>
        </div>
        <h2 id="current-passion" class="card-title">Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…: </h2>
        <div class="card-description">
          <span id="current-stage">Ø§Ù„Ù…Ø±Ø­Ù„Ø©: </span>
          <button class="stage-info-button" type="button" onclick="showStageInfoModal()">
            ?
          </button>
        </div>
      </div>
      <div class="card-content">
        <div id="stage-explanation" style="display: none;" class="stage-explanation"></div>
        <div id="guiding-question" class="guiding-question"></div>
        
        <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª -->
        <div id="suggestions-container" class="suggestions-container hidden">
          <h4 class="suggestions-title">
            ğŸ’¡ <span data-ar="Ù…Ù‚ØªØ±Ø­Ø§Øª Ù…Ù† Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©" data-en="Suggestions from your previous answers">Ù…Ù‚ØªØ±Ø­Ø§Øª Ù…Ù† Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</span>
          </h4>
          <div id="suggestions-grid" class="suggestions-grid"></div>
        </div>
        
        <div id="question-error" class="alert" data-ar="Ø£Ø¯Ø®Ù„ Ø¥Ø¬Ø§Ø¨Ø© ØµØ§Ù„Ø­Ø© Ù„ÙƒÙ„ Ø­Ù‚Ù„ Ù…Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…!" data-en="Please enter a valid answer for each field and select a rating!">Ø£Ø¯Ø®Ù„ Ø¥Ø¬Ø§Ø¨Ø© ØµØ§Ù„Ø­Ø© Ù„ÙƒÙ„ Ø­Ù‚Ù„ Ù…Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…!</div>
        <div id="question-inputs"></div>
        <button id="add-input" class="button button-outline" data-ar="Ø¥Ø¶Ø§ÙØ© Ø¥Ø¯Ø®Ø§Ù„" data-en="Add Input">Ø¥Ø¶Ø§ÙØ© Ø¥Ø¯Ø®Ø§Ù„</button>
      </div>
      <div class="card-footer">
        <button id="prev-question" class="button button-outline" disabled data-ar="Ø§Ù„Ø³Ø§Ø¨Ù‚" data-en="Previous">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        <button id="next-question" class="button button-success" data-ar="Ø§Ù„ØªØ§Ù„ÙŠ" data-en="Next">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </div>
    </div>

    <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <div id="results-section" class="card hidden">
      <div class="card-header">
        <h2 class="card-title" data-ar="Ø§Ù„Ù†ØªØ§Ø¦Ø¬" data-en="Results">Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>
      </div>
      <div class="card-content">
        <h3 class="section-title" data-ar="Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±" data-en="Ranking Based on Assessment">Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h3>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th data-ar="Ø§Ù„Ø´ØºÙ" data-en="Passion">Ø§Ù„Ø´ØºÙ</th>
                <th>Purpose</th>
                <th>Problems</th>
                <th>Power</th>
                <th>Proof</th>
                <th>Possible</th>
                <th data-ar="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ" data-en="Total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
              </tr>
            </thead>
            <tbody id="results-table"></tbody>
          </table>
        </div>
        <div id="recommendation" class="result-highlight"></div>
        <h3 class="section-title" data-ar="Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø°ÙŠ Ø§Ø®ØªØ±ØªÙ‡" data-en="Your Original Priority Order">Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø°ÙŠ Ø§Ø®ØªØ±ØªÙ‡</h3>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th data-ar="Ø§Ù„Ø´ØºÙ" data-en="Passion">Ø§Ù„Ø´ØºÙ</th>
                <th data-ar="Ø§Ù„ØªØ±ØªÙŠØ¨" data-en="Priority">Ø§Ù„ØªØ±ØªÙŠØ¨</th>
              </tr>
            </thead>
            <tbody id="user-priority-table"></tbody>
          </table>
        </div>
      </div>
      <div class="card-footer">
        <button id="restart-test" class="button button-outline" data-ar="Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±" data-en="Restart Assessment">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
          <button id="print-report" class="button button-success" data-ar="Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±" data-en="Print Report">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
          <button id="download-report" class="button button-warning" data-ar="ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±" data-en="Download Report">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
        </div>
      </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div id="toast" class="toast"></div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
    <div id="restore-modal" class="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h3 class="modal-title" data-ar="Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª" data-en="Restore Data">Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
          <button class="modal-close" onclick="closeModal('restore-modal')">&times;</button>
        </div>
        <div class="modal-body">
          <p data-ar="ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù…Ù† Ø¬Ù„Ø³Ø© Ø³Ø§Ø¨Ù‚Ø©. Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯ØªÙ‡Ø§ ÙˆØ§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±ØŸ" data-en="We found saved data from a previous session. Would you like to restore it and complete the assessment?">ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù…Ù† Ø¬Ù„Ø³Ø© Ø³Ø§Ø¨Ù‚Ø©. Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯ØªÙ‡Ø§ ÙˆØ§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±ØŸ</p>
        </div>
        <div class="modal-footer">
          <button class="button button-outline" onclick="clearSavedData()" data-ar="Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯" data-en="Start New Assessment">Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯</button>
          <button class="button button-success" onclick="restoreSavedData()" data-ar="Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚" data-en="Continue Previous Assessment">Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        </div>
      </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø© -->
    <div id="stage-info-modal" class="stage-info-modal">
      <div class="stage-info-content">
        <div class="stage-info-header">
          <h3 id="stage-info-modal-title" class="stage-info-title"></h3>
          <button class="stage-info-close" onclick="closeModal('stage-info-modal')">&times;</button>
        </div>
        <div id="stage-info-modal-body" class="stage-info-body"></div>
      </div>
    </div>

    <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© -->
    <div id="print-content" class="print-only">
      <div class="print-header">
        <h1 data-ar="ØªÙ‚Ø±ÙŠØ± Ø±Ø­Ù„Ø© 6Ps - Ø§ÙƒØªØ´Ù Ù…ÙŠÙˆÙ„Ùƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ©" data-en="6Ps Journey Report - Discover Your Career Passions">ØªÙ‚Ø±ÙŠØ± Ø±Ø­Ù„Ø© 6Ps - Ø§ÙƒØªØ´Ù Ù…ÙŠÙˆÙ„Ùƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</h1>
        <p style="color: #666; font-size: 12pt; margin-top: 10px;" data-ar="ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬" data-en="Comprehensive report containing all answers and results">ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬</p>
      </div>
      <div class="print-content">
        <div id="print-passions" class="print-section">
          <h2 style="color: #052ed8; font-size: 18pt; margin-bottom: 15px;" data-ar="Ø§Ù„Ø´ØºÙ Ø§Ù„Ù…ÙØ¯Ø®Ù„" data-en="Entered Passions">Ø§Ù„Ø´ØºÙ Ø§Ù„Ù…ÙØ¯Ø®Ù„</h2>
          <div id="print-passions-content"></div>
        </div>
        <div id="print-answers" class="print-section">
          <h2 style="color: #052ed8; font-size: 18pt; margin-bottom: 15px;" data-ar="Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬" data-en="Stage Answers Sorted by Results">Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>
          <div id="print-answers-content"></div>
        </div>
        <div id="print-results" class="print-section">
          <h2 style="color: #052ed8; font-size: 18pt; margin-bottom: 15px;" data-ar="Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©" data-en="Final Results">Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h2>
          <div id="print-results-content"></div>
        </div>
      </div>
    </div>

    <!-- Ø¥Ø¶Ø§ÙØ© Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© -->
    <div id="current-stage-modal" class="current-stage-modal">
      <div class="current-stage-content">
        <h2 id="current-stage-modal-title" class="current-stage-title"></h2>
        <p id="current-stage-modal-description" class="current-stage-description"></p>
      </div>
    </div>
  </div>

  <!-- SVG Icons -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="icon-pencil" viewBox="0 0 24 24">
      <path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" />
    </symbol>
    <symbol id="icon-trash" viewBox="0 0 24 24">
      <path d="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19V4Z" />
    </symbol>
    <symbol id="icon-arrow-up" viewBox="0 0 24 24">
      <path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" />
    </symbol>
    <symbol id="icon-arrow-down" viewBox="0 0 24 24">
      <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z" />
    </symbol>
  </svg>

  <script>
    // Language Management
    let currentLanguage = 'ar';
    
    const translations = {
      ar: {
        progressText: 'Ø§Ù„Ø³Ø¤Ø§Ù„ {current} Ù…Ù† {total}',
        remainingText: 'Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: {remaining}',
        passionLabel: 'Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…: ',
        stageLabel: 'Ø§Ù„Ù…Ø±Ø­Ù„Ø©: ',
        convictionLevel: 'Ù…Ø³ØªÙˆÙ‰ Ø§Ù‚ØªÙ†Ø§Ø¹Ùƒ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø±:',
        concernLevel: 'Ù…Ø³ØªÙˆÙ‰ Ù‚Ù„Ù‚Ùƒ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø£Ù…Ø±:',
        selectLevel: 'Ø§Ø®ØªØ± Ø§Ù„Ø¯Ø±Ø¬Ø©',
        low: 'Ø£Ù‚ØªÙ†Ø¹ Ø¨Ù‡ Ù‚Ù„ÙŠÙ„Ø§Ù‹',
        medium: 'Ø£Ù‚ØªÙ†Ø¹ Ø¨Ù‡ Ø¨Ø´ÙƒÙ„ Ù…ØªÙˆØ³Ø·',
        high: 'Ø£Ù‚ØªÙ†Ø¹ Ø¨Ù‡ Ø¨Ø´Ø¯Ø©',
        lowConcern: 'Ø£Ù‚Ù„Ù‚ Ù…Ù†Ù‡ Ù‚Ù„ÙŠÙ„Ø§Ù‹',
        mediumConcern: 'Ø£Ù‚Ù„Ù‚ Ù…Ù†Ù‡ Ø¨Ø´ÙƒÙ„ Ù…ØªÙˆØ³Ø·',
        highConcern: 'Ø£Ù‚Ù„Ù‚ Ù…Ù†Ù‡ Ø¨Ø´Ø¯Ø©',
        answerPlaceholder: 'Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§',
        recommendedPassion: 'ğŸ¯ Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø§Ù„Ø£Ù†Ø³Ø¨ Ù„Ùƒ',
        totalScore: 'Ø§Ù„Ù†ØªÙŠØ¬Ø©: {total} Ù†Ù‚Ø·Ø©',
        personalAdvice: 'ğŸ’¡ Ù†ØµÙŠØ­Ø© Ù„Ùƒ',
        finalRecommendation: 'ğŸ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©',
        recommendedPassionText: 'Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø§Ù„Ø£Ù†Ø³Ø¨: {passion}',
        totalScoreText: 'Total Score: {total} points',
        personalAdviceTitle: 'ğŸ’¡ Ù†ØµÙŠØ­Ø© Ù„Ùƒ',
        nowAnswering: 'Ø£Ù†Øª ØªØ¬ÙŠØ¨ Ø§Ù„Ø¢Ù† Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø©: {passion}',
        dataRestored: 'ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©',
        newAssessment: 'ØªÙ… Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯',
        exactPassions: 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ 3-6 Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª',
        confirmRestart: 'Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±ØŸ Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ.',
        invalidName: 'Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù… ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ Ù…ÙƒØ±Ø±',
        newPassionName: 'Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯:',
        reportTitle: 'ØªÙ‚Ø±ÙŠØ± Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…Ø§Øª Ø§Ù„Ù…Ù‡Ù†ÙŠØ©',
        reportSeparator: '=',
        passionTitle: '{index}. Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…: {passion}',
        guidingQuestionLabel: 'Ø§Ù„Ø³Ø¤Ø§Ù„: {question}',
        ratingLabel: '(Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: {rating})',
        totalLabel: 'Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: {total} Ù†Ù‚Ø·Ø©',
        finalRecommendationTitle: 'Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:',
        recommendationText: 'Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø§Ù„Ø£Ù†Ø³Ø¨: {passion} (Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: {total} Ù†Ù‚Ø·Ø©)',
        personalAdviceLabel: 'Ù†ØµÙŠØ­Ø© Ù„Ùƒ:',
        originalOrderTitle: 'ØªØ±ØªÙŠØ¨ Ø§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙƒ Ø§Ù„Ø£ØµÙ„ÙŠ:',
        priorityLabel: '(Ø§Ù„ØªØ±ØªÙŠØ¨: {priority})',
        fileName: 'Career_Interests_Report_AR.txt',
        noSuggestions: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø³Ø§Ø¨Ù‚Ø© Ù„Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø©',
        suggestionAdded: 'ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­!',
        relativeImportance: 'Ø¯Ø±Ø¬Ø© Ø§Ù„Ø£Ù‡Ù…ÙŠØ© Ø§Ù„Ù†Ø³Ø¨ÙŠØ©:',
        lowImportance: 'Ù…Ù†Ø®ÙØ¶Ø©',
        mediumImportance: 'Ù…ØªÙˆØ³Ø·Ø©',
        highImportance: 'Ø¹Ø§Ù„ÙŠØ©'
      },
      en: {
        progressText: 'Question {current} of {total}',
        remainingText: 'Remaining: {remaining}',
        passionLabel: 'Passion: ',
        stageLabel: 'Stage: ',
        convictionLevel: 'How strongly do you believe in this:',
        concernLevel: 'How concerned are you about this:',
        selectLevel: 'Select Degree',
        low: 'Slightly convinced',
        medium: 'Moderately convinced',
        high: 'Strongly convinced',
        lowConcern: 'Slightly concerned',
        mediumConcern: 'Moderately concerned',
        highConcern: 'Strongly concerned',
        answerPlaceholder: 'Enter your answer',
        recommendedPassion: 'ğŸ¯ Recommended Passion',
        totalScore: 'Total Score: {total} points',
        personalAdvice: 'ğŸ’¡ Personal Advice',
        finalRecommendation: 'ğŸ¯ Final Recommendation',
        recommendedPassionText: 'Recommended Passion: {passion}',
        totalScoreText: 'Total Score: {total} points',
        personalAdviceTitle: 'ğŸ’¡ Personal Advice',
        nowAnswering: 'Now answering questions for: {passion}',
        dataRestored: 'Data restored successfully',
        newAssessment: 'Started new assessment',
        exactPassions: 'Please enter between 3 and 6 passions!',
        confirmRestart: 'Are you sure you want to restart the assessment? All current data will be deleted.',
        invalidName: 'Error: Invalid or duplicate name!',
        newPassionName: 'Enter new passion name:',
        reportTitle: '6Ps Journey Report - Discover Your Career Passions',
        reportSeparator: '=',
        passionTitle: '{index}. Passion: {passion}',
        guidingQuestionLabel: 'Guiding Question: {question}',
        ratingLabel: '(Rating: {rating})',
        totalLabel: 'Total: {total} points',
        finalRecommendationTitle: 'Final Recommendation:',
        recommendationText: 'Recommended Passion: {passion} (Total: {total} points)',
        personalAdviceLabel: 'Personal Advice:',
        originalOrderTitle: 'Your Original Priority Order:',
        priorityLabel: '(Priority: {priority})',
        fileName: '6Ps_Report_EN.txt',
        noSuggestions: 'No previous answers for this stage',
        suggestionAdded: 'Suggestion added successfully!',
        relativeImportance: 'Relative Importance:',
        lowImportance: 'Low',
        mediumImportance: 'Medium',
        highImportance: 'High'
      }
    };

    function toggleLanguage() {
      currentLanguage = currentLanguage === 'ar' ? 'en' : 'ar';
      
      const html = document.getElementById('html-root');
      const body = document.body;
      const languageBtn = document.querySelector('.language-switcher');
      
      if (currentLanguage === 'en') {
        html.setAttribute('lang', 'en');
        html.setAttribute('dir', 'ltr');
        body.classList.add('en');
        languageBtn.innerHTML = '<span class="flag">ğŸ‡¸ğŸ‡¦</span><span class="text">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>';
      } else {
        html.setAttribute('lang', 'ar');
        html.setAttribute('dir', 'rtl');
        body.classList.remove('en');
        languageBtn.innerHTML = '<span class="flag">ğŸ‡ºğŸ‡¸</span><span class="text">English</span>';
      }
      
      // Update all translatable elements
      document.querySelectorAll('[data-ar]').forEach(element => {
        const key = currentLanguage === 'ar' ? 'data-ar' : 'data-en';
        element.textContent = element.getAttribute(key);
      });
      
      // Update placeholders
      document.querySelectorAll('[data-ar][placeholder]').forEach(element => {
        const key = currentLanguage === 'ar' ? 'data-ar' : 'data-en';
        element.placeholder = element.getAttribute(key);
      });
      
      // Update current question display if in questions section
      if (!questionSection.classList.contains('hidden')) {
        updateQuestionDisplay();
      }
      
      // Update results if in results section
      if (!resultsSection.classList.contains('hidden')) {
        updateResultsDisplay();
      }
      
      // Save language preference
      localStorage.setItem('6ps_language', currentLanguage);
    }

    function t(key, params = {}) {
      let text = translations[currentLanguage][key] || key;
      Object.keys(params).forEach(param => {
        text = text.replace(`{${param}}`, params[param]);
      });
      return text;
    }

    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¥Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ù†ØµÙŠ
    function ratingToLevel(rating, stage) {
      const absRating = Math.abs(rating);
      if (stage === 'Problems') {
        if (absRating === 6) return currentLanguage === 'ar' ? 'Ø¹Ø§Ù„ÙŠØ©' : 'High';
        if (absRating === 4) return currentLanguage === 'ar' ? 'Ù…ØªÙˆØ³Ø·Ø©' : 'Medium';
        if (absRating === 2) return currentLanguage === 'ar' ? 'Ù…Ù†Ø®ÙØ¶Ø©' : 'Low';
      } else {
        if (absRating === 6) return currentLanguage === 'ar' ? 'Ø¹Ø§Ù„ÙŠØ©' : 'High';
        if (absRating === 4) return currentLanguage === 'ar' ? 'Ù…ØªÙˆØ³Ø·' : 'Medium';
        if (absRating === 2) return currentLanguage === 'ar' ? 'Ø¨Ø³ÙŠØ·' : 'Low';
      }
      return '';
    }

    // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø±Ø­Ù„Ø©
    function showStageInfoModal() {
      const stage = stages[currentStageIndex];
      const explanation = stageExplanations[currentLanguage][stage];
      
      document.getElementById('stage-info-modal-title').textContent = explanation.title;
      document.getElementById('stage-info-modal-body').innerHTML = `
        <h4 style="color: var(--primary); margin-bottom: 1rem;">${explanation.why}</h4>
        <ul style="margin-bottom: 1.5rem; padding-${currentLanguage === 'ar' ? 'right' : 'left'}: 1.5rem;">
          ${explanation.benefits.map(benefit => `<li style="margin-bottom: 0.5rem;">${benefit}</li>`).join('')}
        </ul>
        <h4 style="color: var(--green); margin-bottom: 1rem;">${explanation.howHelps}</h4>
        <ul style="padding-${currentLanguage === 'ar' ? 'right' : 'left'}: 1.5rem;">
          ${explanation.helpPoints.map(point => `<li style="margin-bottom: 0.5rem;">${point}</li>`).join('')}
        </ul>
      `;
      
      document.getElementById('stage-info-modal').classList.add('active');
    }

    // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    const passions = [];
    const stages = ['Purpose', 'Problems', 'Power', 'Proof', 'Possible']; // Purpose Ø£ÙˆÙ„Ø§Ù‹ Ø«Ù… Problems
    
    const guidingQuestions = {
      ar: {
        Purpose: 'Ù…Ø§ Ù‡Ùˆ Ù‡Ø¯ÙÙƒ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ ÙƒÙŠÙ Ø³ÙŠÙÙŠØ¯Ùƒ Ø£Ùˆ ÙŠÙÙŠØ¯ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŸ',
        Problems: 'Ù…Ø§ Ù‡ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„ØªÙŠ Ù‚Ø¯ ØªÙˆØ§Ø¬Ù‡Ùƒ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ',
        Power: 'Ù…Ø§ Ù‡ÙŠ Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ø§Ù„ØªÙŠ ØªØ³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ',
        Proof: 'Ù…Ø§ Ù‡ÙŠ Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ',
        Possible: 'Ù…Ø§ Ù‡ÙŠ Ø§Ù„ÙØ±Øµ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ'
      },
      en: {
        Purpose: 'What is the main purpose or goal of this passion? How does it positively impact your life or others?',
        Problems: 'What challenges or obstacles might you face with this passion? What concerns you?',
        Power: 'What strengths or skills do you have that support this passion?',
        Proof: 'What evidence or achievements prove your ability to succeed in this passion?',
        Possible: 'What future opportunities could this passion open up? How could it develop?'
      }
    };

    const stageExplanations = {
      ar: {
        Purpose: {
          title: 'ğŸ¯ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù‡Ø¯Ù ÙˆØ§Ù„ØºØ±Ø¶',
          why: 'Ù„Ù…Ø§Ø°Ø§ Ù†Ø­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø©ØŸ',
          benefits: [
            'ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¯Ø§ÙØ¹ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙˆØ±Ø§Ø¡ Ø´ØºÙÙƒ ÙŠÙ‚ÙˆÙŠ Ø¹Ø²ÙŠÙ…ØªÙƒ',
            'ÙÙ‡Ù… Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ ÙŠØ²ÙŠØ¯ Ù…Ù† Ø­Ù…Ø§Ø³Ùƒ',
            'Ø±Ø¨Ø· Ø§Ù„Ø´ØºÙ Ø¨Ù‚ÙŠÙ…Ùƒ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙŠØ¬Ø¹Ù„Ù‡ Ø£ÙƒØ«Ø± Ø§Ø³ØªØ¯Ø§Ù…Ø©',
            'ÙˆØ¶ÙˆØ­ Ø§Ù„Ù‡Ø¯Ù ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„ØªØ±ÙƒÙŠØ² ÙˆØ§Ù„Ù…Ø«Ø§Ø¨Ø±Ø©'
          ],
          howHelps: 'ÙƒÙŠÙ Ø³ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ù‡Ø°Ø§ØŸ',
          helpPoints: [
            'Ø³ØªØ¬Ø¯ Ø§Ù„Ø¯Ø§ÙØ¹ Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµØ¹Ø¨Ø©',
            'Ø³ØªØ´Ø¹Ø± Ø¨Ù…Ø¹Ù†Ù‰ Ø£Ø¹Ù…Ù‚ ÙÙŠ Ø¹Ù…Ù„Ùƒ',
            'Ø³ØªØªÙ…ÙƒÙ† Ù…Ù† Ø¥Ù„Ù‡Ø§Ù… Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ø¨Ø±Ø¤ÙŠØªÙƒ',
            'Ø³ØªØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù…Ø§Ø³ Ù„ÙØªØ±Ø© Ø£Ø·ÙˆÙ„'
          ]
        },
        Problems: {
          title: 'ğŸš§ Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª ÙˆØ§Ù„Ù…Ø´Ø§ÙƒÙ„',
          why: 'Ù„Ù…Ø§Ø°Ø§ Ù†Ø­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø©ØŸ',
          benefits: [
            'ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª Ø§Ù„Ù…Ø­ØªÙ…Ù„Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹ ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ù„Ù‡Ø§',
            'Ù…Ø¹Ø±ÙØ© Ù†Ù‚Ø§Ø· Ø¶Ø¹ÙÙƒ ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ù† ÙˆØ¶Ø¹ Ø®Ø·Ø· Ù„Ù„ØªØºÙ„Ø¨ Ø¹Ù„ÙŠÙ‡Ø§',
            'ØªÙ‚ÙŠÙŠÙ… ÙˆØ§Ù‚Ø¹ÙŠ Ù„Ù„ØªØ­Ø¯ÙŠØ§Øª ÙŠÙ…Ù†Ø¹ Ø§Ù„ØµØ¯Ù…Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©',
            'ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø± Ù…Ø¯Ø±ÙˆØ³ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø®Ø§Ø·Ø±'
          ],
          howHelps: 'ÙƒÙŠÙ Ø³ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ù‡Ø°Ø§ØŸ',
          helpPoints: [
            'Ø³ØªÙƒÙˆÙ† Ø£ÙƒØ«Ø± Ø§Ø³ØªØ¹Ø¯Ø§Ø¯Ø§Ù‹ Ù„Ù…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª',
            'Ø³ØªØªÙ…ÙƒÙ† Ù…Ù† ÙˆØ¶Ø¹ Ø®Ø·Ø· Ø¨Ø¯ÙŠÙ„Ø©',
            'Ø³ØªÙ‚Ù„Ù„ Ù…Ù† Ø§Ù„Ù…ÙØ§Ø¬Ø¢Øª ØºÙŠØ± Ø§Ù„Ø³Ø§Ø±Ø©',
            'Ø³ØªØªØ®Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ø£ÙƒØ«Ø± Ø­ÙƒÙ…Ø©'
          ]
        },
        Power: {
          title: 'ğŸ’ª Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª',
          why: 'Ù„Ù…Ø§Ø°Ø§ Ù†Ø­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø©ØŸ',
          benefits: [
            'ØªØ­Ø¯ÙŠØ¯ Ù†Ù‚Ø§Ø· Ù‚ÙˆØªÙƒ ÙŠØ²ÙŠØ¯ Ù…Ù† Ø«Ù‚ØªÙƒ Ø¨Ù†ÙØ³Ùƒ',
            'Ù…Ø¹Ø±ÙØ© Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ© ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ Ø¨Ù†Ø§Ø¡ Ø®Ø·Ø© Ø§Ù„ØªØ·ÙˆÙŠØ±',
            'Ø§Ø³ØªØºÙ„Ø§Ù„ Ù‚Ø¯Ø±Ø§ØªÙƒ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© ÙŠØ³Ø±Ø¹ Ù…Ù† ØªÙ‚Ø¯Ù…Ùƒ',
            'ÙÙ‡Ù… Ù…ÙˆØ§Ù‡Ø¨Ùƒ ÙŠÙˆØ¬Ù‡Ùƒ Ù„Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØµØ­ÙŠØ­'
          ],
          howHelps: 'ÙƒÙŠÙ Ø³ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ù‡Ø°Ø§ØŸ',
          helpPoints: [
            'Ø³ØªØ¨Ù†ÙŠ Ø¹Ù„Ù‰ Ù†Ù‚Ø§Ø· Ù‚ÙˆØªÙƒ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©',
            'Ø³ØªØ·ÙˆØ± Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ø¨Ø´ÙƒÙ„ Ø£ÙƒØ«Ø± ÙØ¹Ø§Ù„ÙŠØ©',
            'Ø³ØªØ´Ø¹Ø± Ø¨Ø«Ù‚Ø© Ø£ÙƒØ¨Ø± ÙÙŠ Ù‚Ø¯Ø±Ø§ØªÙƒ',
            'Ø³ØªØ­Ù‚Ù‚ Ù†ØªØ§Ø¦Ø¬ Ø£ÙØ¶Ù„ Ø¨Ø¬Ù‡Ø¯ Ø£Ù‚Ù„'
          ]
        },
        Proof: {
          title: 'ğŸ† Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø«Ø¨Ø§Øª ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª',
          why: 'Ù„Ù…Ø§Ø°Ø§ Ù†Ø­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø©ØŸ',
          benefits: [
            'ØªÙˆØ«ÙŠÙ‚ Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ ÙŠØ«Ø¨Øª Ù‚Ø¯Ø±ØªÙƒ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¬Ø§Ø­',
            'Ù…Ø±Ø§Ø¬Ø¹Ø© ØªØ¬Ø§Ø±Ø¨Ùƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ØªØ¹Ø·ÙŠÙƒ Ø«Ù‚Ø© Ø£ÙƒØ¨Ø±',
            'Ø¥Ø¸Ù‡Ø§Ø± Ø£Ø¯Ù„Ø© Ù…Ù„Ù…ÙˆØ³Ø© ÙŠÙ‚Ù†Ø¹ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ø¨Ù‚Ø¯Ø±Ø§ØªÙƒ',
            'ØªÙ‚ÙŠÙŠÙ… Ù…Ø³ÙŠØ±ØªÙƒ ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„ØªØ®Ø·ÙŠØ· Ù„Ù„Ù…Ø³ØªÙ‚Ø¨Ù„'
          ],
          howHelps: 'ÙƒÙŠÙ Ø³ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ù‡Ø°Ø§ØŸ',
          helpPoints: [
            'Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø«Ù‚Ø© Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†',
            'Ø³ØªØªÙ…ÙƒÙ† Ù…Ù† Ø¨Ù†Ø§Ø¡ Ø³Ù…Ø¹Ø© Ù‚ÙˆÙŠØ©',
            'Ø³ØªØ¬Ø¯ ÙØ±Øµ Ø£ÙØ¶Ù„ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ',
            'Ø³ØªØ´Ø¹Ø± Ø¨Ø§Ù„ÙØ®Ø± ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²'
          ]
        },
        Possible: {
          title: 'ğŸš€ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª ÙˆØ§Ù„ÙØ±Øµ',
          why: 'Ù„Ù…Ø§Ø°Ø§ Ù†Ø­Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø±Ø­Ù„Ø©ØŸ',
          benefits: [
            'Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„ÙØ±Øµ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ© ÙŠÙˆØ³Ø¹ Ø¢ÙØ§Ù‚Ùƒ',
            'ØªØ­Ø¯ÙŠØ¯ Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª Ø§Ù„Ù†Ù…Ùˆ ÙŠØ­ÙØ²Ùƒ Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±',
            'ÙÙ‡Ù… Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙŠØ¨Ù‚ÙŠÙƒ ÙÙŠ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©',
            'Ø±Ø¤ÙŠØ© Ø§Ù„Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª ØªØ²ÙŠØ¯ Ù…Ù† Ø­Ù…Ø§Ø³Ùƒ'
          ],
          howHelps: 'ÙƒÙŠÙ Ø³ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ù‡Ø°Ø§ØŸ',
          helpPoints: [
            'Ø³ØªÙƒØªØ´Ù ÙØ±Øµ Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù… ØªÙÙƒØ± Ø¨Ù‡Ø§',
            'Ø³ØªØ®Ø·Ø· Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø£ÙƒØ«Ø± Ø¥Ø´Ø±Ø§Ù‚Ø§Ù‹',
            'Ø³ØªØ¨Ù‚Ù‰ Ù…ØªØ­Ù…Ø³Ø§Ù‹ Ù„Ù„Ù†Ù…Ùˆ ÙˆØ§Ù„ØªØ·ÙˆØ±',
            'Ø³ØªØªØ®Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ø£ÙØ¶Ù„'
          ]
        }
      },
      en: {
        Purpose: {
          title: 'ğŸ¯ Purpose and Goal Stage',
          why: 'Why do we solve this stage?',
          benefits: [
            'Identifying the real motivation behind your passion strengthens your determination',
            'Understanding positive impact increases your enthusiasm',
            'Connecting passion to your personal values makes it more sustainable',
            'Clear purpose helps with focus and perseverance'
          ],
          howHelps: 'How will this help you?',
          helpPoints: [
            'You\'ll find motivation to continue during difficult times',
            'You\'ll feel deeper meaning in your work',
            'You\'ll be able to inspire others with your vision',
            'You\'ll maintain enthusiasm for longer'
          ]
        },
        Problems: {
          title: 'ğŸš§ Challenges and Problems Stage',
          why: 'Why do we solve this stage?',
          benefits: [
            'Identifying potential obstacles in advance helps you prepare for them',
            'Knowing your weaknesses allows you to create plans to overcome them',
            'Realistic assessment of challenges prevents future shocks',
            'Helps you make informed decisions based on risks'
          ],
          howHelps: 'How will this help you?',
          helpPoints: [
            'You\'ll be better prepared to face challenges',
            'You\'ll be able to create alternative plans',
            'You\'ll reduce unpleasant surprises',
            'You\'ll make wiser decisions'
          ]
        },
        Power: {
          title: 'ğŸ’ª Power and Skills Stage',
          why: 'Why do we solve this stage?',
          benefits: [
            'Identifying your strengths increases your self-confidence',
            'Knowing your current skills helps build a development plan',
            'Leveraging your natural abilities accelerates your progress',
            'Understanding your talents guides you to the right path'
          ],
          howHelps: 'How will this help you?',
          helpPoints: [
            'You\'ll build on your existing strengths',
            'You\'ll develop your skills more effectively',
            'You\'ll feel more confident in your abilities',
            'You\'ll achieve better results with less effort'
          ]
        },
        Proof: {
          title: 'ğŸ† Proof and Achievements Stage',
          why: 'Why do we solve this stage?',
          benefits: [
            'Documenting your achievements proves your ability to succeed',
            'Reviewing past experiences gives you greater confidence',
            'Showing concrete evidence convinces others of your capabilities',
            'Evaluating your journey helps plan for the future'
          ],
          howHelps: 'How will this help you?',
          helpPoints: [
            'You\'ll gain greater trust from others',
            'You\'ll be able to build a strong reputation',
            'You\'ll find better opportunities based on your achievements',
            'You\'ll feel pride and accomplishment'
          ]
        },
        Possible: {
          title: 'ğŸš€ Possibilities and Opportunities Stage',
          why: 'Why do we solve this stage?',
          benefits: [
            'Exploring future opportunities broadens your horizons',
            'Identifying growth potential motivates you to continue',
            'Understanding new trends keeps you ahead',
            'Seeing possibilities increases your enthusiasm'
          ],
          howHelps: 'How will this help you?',
          helpPoints: [
            'You\'ll discover new opportunities you hadn\'t thought of',
            'You\'ll plan for a brighter future',
            'You\'ll stay motivated for growth and development',
            'You\'ll make better investment decisions'
          ]
        }
      }
    };

    // Ù†ØµØ§Ø¦Ø­ Ù„ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©
    const stageHints = {
      ar: {
        Problems: [
          'ÙÙƒØ± ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©: Ù‡Ù„ ÙŠØ­ØªØ§Ø¬ Ø§Ø³ØªØ«Ù…Ø§Ø± ÙƒØ¨ÙŠØ±ØŸ Ù‡Ù„ Ø§Ù„Ø¯Ø®Ù„ Ù…Ø³ØªÙ‚Ø±ØŸ',
          'Ø§Ø°ÙƒØ± Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©: Ù…Ø§ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ ØªØ·ÙˆÙŠØ±Ù‡Ø§ØŸ',
          'Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø®Ø§Ø·Ø±: Ù…Ø§ Ø£ÙƒØ¨Ø± Ø§Ù„Ù…Ø®Ø§ÙˆÙ Ø§Ù„ØªÙŠ ØªÙˆØ§Ø¬Ù‡Ùƒ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ'
        ],
        Purpose: [
          'ÙÙƒØ± ÙÙŠ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ: Ù„Ù…Ø§Ø°Ø§ ØªØ­Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠØ¯ÙØ¹Ùƒ Ø¥Ù„ÙŠÙ‡ØŸ',
          'Ø§ÙƒØªØ¨ Ø¹Ù† Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ: ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙÙŠØ¯ Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ø£Ùˆ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ØŸ',
          'Ø­Ø¯Ø¯ Ø§Ù„Ù‚ÙŠÙ…: Ù…Ø§ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„ØªÙŠ ÙŠØ­Ù‚Ù‚Ù‡Ø§ Ù„Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙØŸ'
        ],
        Power: [
          'Ø§Ø°ÙƒØ± Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: Ù…Ø§ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙŠ ØªÙ…ØªÙ„ÙƒÙ‡Ø§ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ',
          'Ø­Ø¯Ø¯ Ù†Ù‚Ø§Ø· Ù‚ÙˆØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©: Ø§Ù„ØµØ¨Ø±ØŒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ØŒ Ø§Ù„ØªÙˆØ§ØµÙ„ØŒ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©ØŒ Ø¥Ù„Ø®',
          'Ø§ÙƒØªØ¨ Ø¹Ù† Ø®Ø¨Ø±Ø§ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©: Ø£ÙŠ ØªØ¬Ø§Ø±Ø¨ Ø³Ø§Ø¨Ù‚Ø© ØªØ¯Ø¹Ù… Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙØŸ'
        ],
        Proof: [
          'Ø§Ø°ÙƒØ± Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ: Ø£ÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø£Ùˆ Ø£Ø¹Ù…Ø§Ù„ Ù‚Ù…Øª Ø¨Ù‡Ø§ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ',
          'Ø­Ø¯Ø¯ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø£Ùˆ Ø§Ù„Ø¯ÙˆØ±Ø§Øª: Ø£ÙŠ ØªØ¹Ù„ÙŠÙ… Ø±Ø³Ù…ÙŠ Ø£Ùˆ ØºÙŠØ± Ø±Ø³Ù…ÙŠ Ø­ØµÙ„Øª Ø¹Ù„ÙŠÙ‡ØŸ',
          'Ø§ÙƒØªØ¨ Ø¹Ù† Ø§Ù„ØªÙ‚Ø¯ÙŠØ±: Ø£ÙŠ Ù…Ø¯Ø­ Ø£Ùˆ ØªÙ‚Ø¯ÙŠØ± Ø­ØµÙ„Øª Ø¹Ù„ÙŠÙ‡ Ù…Ù† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŸ'
        ],
        Possible: [
          'ÙÙƒØ± ÙÙŠ Ø§Ù„ÙØ±Øµ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©: Ù…Ø§ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø£Ùˆ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…ØªØ§Ø­Ø©ØŸ',
          'Ø­Ø¯Ø¯ Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª Ø§Ù„Ù†Ù…Ùˆ: ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† ØªØ·ÙˆÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙ Ù…Ø¹ Ø§Ù„ÙˆÙ‚ØªØŸ',
          'Ø§ÙƒØªØ¨ Ø¹Ù† Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª: Ù…Ø§ Ø§Ù„ØªØ·ÙˆØ±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ'
        ]
      },
      en: {
        Problems: [
          'Think about financial challenges: Does it require large investment? Is income stable?',
          'Mention technical obstacles: What skills do you need to develop?',
          'Identify risks: What are your biggest concerns in this field?'
        ],
        Purpose: [
          'Think about the main goal: Why do you love this field? What drives you to it?',
          'Write about positive impact: How could this passion benefit others or society?',
          'Define values: What personal values does this passion fulfill for you?'
        ],
        Power: [
          'List your current skills: What skills do you already possess?',
          'Identify personal strengths: Patience, creativity, communication, leadership, etc.',
          'Write about past experiences: Any previous experiences that support this passion?'
        ],
        Proof: [
          'Mention your achievements: Any projects or work you\'ve done in this field?',
          'Identify certificates or courses: Any formal or informal education you\'ve received?',
          'Write about recognition: Any praise or recognition you\'ve received from others?'
        ],
        Possible: [
          'Think about future opportunities: What jobs or projects are available?',
          'Identify growth potential: How can this passion develop over time?',
          'Write about trends: What new developments are happening in this field?'
        ]
      }
    };
    
    let currentPassionIndex = 0;
    let currentStageIndex = 0;
    let previousPassionIndex = -1;
    const answers = {};
    const userPriorities = {};
    let currentStep = "selection"; // selection, questions, results
    let personalAdviceAdded = false;

    // Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
    const passionInput = document.getElementById('passion-input');
    const addPassionBtn = document.getElementById('add-passion');
    const passionError = document.getElementById('passion-error');
    const passionList = document.getElementById('passion-list');
    const startJourneyBtn = document.getElementById('start-journey');
    const passionSelection = document.getElementById('passion-selection');
    const questionSection = document.getElementById('question-section');
    const resultsSection = document.getElementById('results-section');
    const currentPassionEl = document.getElementById('current-passion');
    const currentStageEl = document.getElementById('current-stage');
    const stageExplanationEl = document.getElementById('stage-explanation');
    const guidingQuestionEl = document.getElementById('guiding-question');
    const questionInputs = document.getElementById('question-inputs');
    const questionError = document.getElementById('question-error');
    const addInputBtn = document.getElementById('add-input');
    const prevQuestionBtn = document.getElementById('prev-question');
    const nextQuestionBtn = document.getElementById('next-question');
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');
    const remainingText = document.getElementById('remaining-text');
    const resultsTable = document.getElementById('results-table');
    const userPriorityTable = document.getElementById('user-priority-table');
    const recommendation = document.getElementById('recommendation');
    const restartTestBtn = document.getElementById('restart-test');
    const downloadReportBtn = document.getElementById('download-report');
    const printReportBtn = document.getElementById('print-report');
    const toast = document.getElementById('toast');
    const restoreModal = document.getElementById('restore-modal');
    const suggestionsContainer = document.getElementById('suggestions-container');
    const suggestionsGrid = document.getElementById('suggestions-grid');

    // Initialize language from localStorage
    window.addEventListener('load', () => {
      const savedLanguage = localStorage.getItem('6ps_language');
      if (savedLanguage && savedLanguage !== currentLanguage) {
        toggleLanguage();
      }
      
      if (!checkSavedData()) {
        updatePassionSelection();
      }
    });

    // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
    function showModal(modalId) {
      document.getElementById(modalId).classList.add('active');
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }

    // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
    function showToast(message, duration = 3000) {
      toast.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, duration);
    }

    // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¥Ù„Ù‰ Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ©
    function ratingToPercentage(rating, stage) {
      const maxRating = stage === 'Problems' ? 6 : 6; // Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ø·Ù„Ù‚Ø©
      const absRating = Math.abs(rating);
      return Math.round((absRating / maxRating) * 100);
    }

    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ localStorage
    function saveData() {
      const data = {
        passions: passions,
        userPriorities: userPriorities,
        answers: answers,
        currentPassionIndex: currentPassionIndex,
        currentStageIndex: currentStageIndex,
        currentStep: currentStep,
        language: currentLanguage
      };
      
      localStorage.setItem('6ps_journey_data_bilingual', JSON.stringify(data));
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©
    function checkSavedData() {
      const savedData = localStorage.getItem('6ps_journey_data_bilingual');
      if (savedData) {
        const data = JSON.parse(savedData);
        if (data.passions && data.passions.length > 0) {
          showModal('restore-modal');
          return true;
        }
      }
      return false;
    }

    // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
    function restoreSavedData() {
      const savedData = localStorage.getItem('6ps_journey_data_bilingual');
      if (savedData) {
        const data = JSON.parse(savedData);
        
        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        data.passions.forEach(p => passions.push(p));
        Object.assign(userPriorities, data.userPriorities);
        Object.assign(answers, data.answers);
        currentPassionIndex = data.currentPassionIndex;
        currentStageIndex = data.currentStageIndex;
        currentStep = data.currentStep;
        
        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù„ØºØ©
        if (data.language && data.language !== currentLanguage) {
          toggleLanguage();
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
        if (currentStep === "questions") {
          passionSelection.classList.add('hidden');
          questionSection.classList.remove('hidden');
          resultsSection.classList.add('hidden');
          showQuestion();
        } else if (currentStep === "results") {
          passionSelection.classList.add('hidden');
          questionSection.classList.add('hidden');
          resultsSection.classList.remove('hidden');
          showResults();
        } else {
          updatePassionSelection();
        }
        
        closeModal('restore-modal');
        showToast(t('dataRestored'));
      }
    }

    // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙˆØ¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯
    function clearSavedData() {
      localStorage.removeItem('6ps_journey_data_bilingual');
      closeModal('restore-modal');
      showToast(t('newAssessment'));
    }

    // Ø¥Ø¯Ø§Ø±Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø´ØºÙ
    function updatePassionSelection() {
      const passionCount = passions.length;
      startJourneyBtn.disabled = passionCount < 3 || passionCount > 6;
      passionInput.disabled = passionCount >= 6;
      addPassionBtn.disabled = passionCount >= 6;
      renderPassionList();
      
      // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      currentStep = "selection";
      saveData();
    }

    // Ø¥Ø¶Ø§ÙØ© Ø´ØºÙ Ø¬Ø¯ÙŠØ¯
    addPassionBtn.addEventListener('click', () => {
      const value = passionInput.value.trim();

      if (value && passions.length < 6 && !passions.includes(value)) {
        passions.push(value);
        userPriorities[value] = passions.length; // Ø§Ù„ØªØ±ØªÙŠØ¨ Ù…Ù† 1-6
        passionInput.value = '';
        passionError.style.display = 'none';
        updatePassionSelection();
      } else {
        passionError.style.display = 'block';
        setTimeout(() => {
          passionError.style.display = 'none';
        }, 3000);
      }
    });

    // Ø¥Ø¶Ø§ÙØ© Ø´ØºÙ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
    passionInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        addPassionBtn.click();
      }
    });

    // Ø¹Ø±Ø¶ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø´ØºÙ
    function renderPassionList() {
      passionList.innerHTML = '';
      for (let i = 0; i < 6; i++) {
        const passion = passions[i] || '';
        const priority = passion ? userPriorities[passion] : '-';
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${passion || '-'}</td>
          <td>${priority}</td>
          <td>
            ${passion ? `
              <div class="table-actions">
                <button class="action-button" onclick="editPassion(${i})" title="${currentLanguage === 'ar' ? 'ØªØ¹Ø¯ÙŠÙ„' : 'Edit'}">
                  <svg class="icon"><use xlink:href="#icon-pencil"></use></svg>
                </button>
                <button class="action-button delete-button" onclick="deletePassion(${i})" title="${currentLanguage === 'ar' ? 'Ø­Ø°Ù' : 'Delete'}">
                  <svg class="icon"><use xlink:href="#icon-trash"></use></svg>
                </button>
                <button class="action-button" ${i === 0 ? 'disabled' : ''} onclick="movePassion(${i}, -1)" title="${currentLanguage === 'ar' ? 'Ù„Ø£Ø¹Ù„Ù‰' : 'Move Up'}">
                  <svg class="icon"><use xlink:href="#icon-arrow-up"></use></svg>
                </button>
                <button class="action-button" ${i === passions.length - 1 ? 'disabled' : ''} onclick="movePassion(${i}, 1)" title="${currentLanguage === 'ar' ? 'Ù„Ø£Ø³ÙÙ„' : 'Move Down'}">
                  <svg class="icon"><use xlink:href="#icon-arrow-down"></use></svg>
                </button>
              </div>
            ` : '-'}
          </td>
        `;
        passionList.appendChild(row);
      }
    }

    // ØªØ¹Ø¯ÙŠÙ„ Ø´ØºÙ
    window.editPassion = function(index) {
      const passion = passions[index];
      const newValue = prompt(t('newPassionName'), passion);

      if (newValue && newValue.trim() && !passions.includes(newValue.trim())) {
        delete userPriorities[passion];
        passions[index] = newValue.trim();
        userPriorities[newValue.trim()] = index + 1; // Ø§Ù„ØªØ±ØªÙŠØ¨ Ù…Ù† 1-6
        updatePassionSelection();
      } else if (newValue) {
        alert(t('invalidName'));
      }
    };

    // Ù…Ø³Ø­ Ø´ØºÙ
    window.deletePassion = function(index) {
      const passion = passions[index];
      delete userPriorities[passion];
      passions.splice(index, 1);
      reassignPriorities();
      updatePassionSelection();
    };

    // Ù†Ù‚Ù„ Ø´ØºÙ Ù„Ø£Ø¹Ù„Ù‰ Ø£Ùˆ Ù„Ø£Ø³ÙÙ„
    window.movePassion = function(index, direction) {
      const newIndex = index + direction;
      if (newIndex >= 0 && newIndex < passions.length) {
        [passions[index], passions[newIndex]] = [passions[newIndex], passions[index]];
        reassignPriorities();
        updatePassionSelection();
      }
    };

    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª
    function reassignPriorities() {
      const newPriorities = {};
      passions.forEach((passion, index) => {
        newPriorities[passion] = index + 1; // Ø§Ù„ØªØ±ØªÙŠØ¨ Ù…Ù† 1-6
      });
      Object.assign(userPriorities, newPriorities);
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„Ø±Ø­Ù„Ø©
    startJourneyBtn.addEventListener('click', () => {
      if (passions.length < 3 || passions.length > 6) {
        alert(currentLanguage === 'ar' ? 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ù† 3 Ø¥Ù„Ù‰ 6 Ø´ØºÙ!' : 'Please enter between 3 and 6 passions!');
        return;
      }
      passions.forEach(p => {
        if (!answers[p]) {
          answers[p] = { Problems: [], Purpose: [], Power: [], Proof: [], Possible: [] };
        }
      });
      passionSelection.classList.add('hidden');
      questionSection.classList.remove('hidden');
      previousPassionIndex = -1;
      currentStep = "questions";
      showQuestion();
    });

    // Ø¥Ø¶Ø§ÙØ© Ù…ØªØºÙŠØ± Ù„ØªØªØ¨Ø¹ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
    const usedSuggestions = new Set();

    // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
    function showSuggestions() {
      const currentPassion = passions[currentPassionIndex];
      const currentStage = stages[currentStageIndex];
      
      // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù…Ø±Ø­Ù„Ø© ÙÙŠ Ø´ØºÙ Ø¢Ø®Ø±
      const suggestions = new Map(); // Ø§Ø³ØªØ®Ø¯Ø§Ù… Map Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
      
      passions.forEach(passion => {
        if (passion !== currentPassion && answers[passion] && answers[passion][currentStage]) {
          answers[passion][currentStage].forEach(answer => {
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Øµ ÙƒÙ€ key Ù„Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
            const key = answer.text.toLowerCase().trim();
            // ÙÙ‚Ø· Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª Ø§Ù„ØªÙŠ Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§ Ù…Ù† Ù‚Ø¨Ù„
            if (!suggestions.has(key) && !usedSuggestions.has(key)) {
              suggestions.set(key, {
                text: answer.text,
                rating: answer.rating,
                passion: passion,
                level: ratingToLevel(answer.rating, currentStage)
              });
            }
          });
        }
      });

      if (suggestions.size > 0) {
        suggestionsContainer.classList.remove('hidden');
        suggestionsGrid.innerHTML = '';
        
        // ØªØ­ÙˆÙŠÙ„ Map Ø¥Ù„Ù‰ Ù…ØµÙÙˆÙØ© ÙˆØªØ±ØªÙŠØ¨Ù‡Ø§ Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
        const sortedSuggestions = Array.from(suggestions.values())
          .sort((a, b) => Math.abs(b.rating) - Math.abs(a.rating));
        
        sortedSuggestions.forEach(suggestion => {
          const suggestionChip = document.createElement('div');
          suggestionChip.className = 'suggestion-chip';
          suggestionChip.onclick = () => {
            addSuggestionToInput(suggestion.text, suggestion.rating);
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
            usedSuggestions.add(suggestion.text.toLowerCase().trim());
            // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ù…Ù† Ø§Ù„Ø¹Ø±Ø¶
            suggestionChip.remove();
            // Ø¥Ø®ÙØ§Ø¡ Ù‚Ø³Ù… Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª Ø¥Ø°Ø§ Ù„Ù… ÙŠØªØ¨Ù‚ Ø£ÙŠ Ù…Ù‚ØªØ±Ø­Ø§Øª
            if (suggestionsGrid.children.length === 0) {
              suggestionsContainer.classList.add('hidden');
            }
          };
          
          // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ÙˆÙ† Ø­Ø³Ø¨ Ø§Ù„Ù…Ø±Ø­Ù„Ø©
          let levelClass = '';
          if (currentStage === 'Problems') {
            // Ù…Ù†Ø®ÙØ¶Ø© Ø£Ø®Ø¶Ø±ØŒ Ù…ØªÙˆØ³Ø·Ø© Ø£ØµÙØ±ØŒ Ø¹Ø§Ù„ÙŠØ© Ø£Ø­Ù…Ø±
            if (Math.abs(suggestion.rating) === 6) levelClass = 'low'; // Ø£Ø­Ù…Ø±
            else if (Math.abs(suggestion.rating) === 4) levelClass = 'medium'; // Ø£ØµÙØ±
            else levelClass = 'high'; // Ø£Ø®Ø¶Ø±
          } else {
            // Ø§Ù„Ø¨Ø³ÙŠØ· Ø£Ø­Ù…Ø±ØŒ Ø§Ù„Ù…ØªÙˆØ³Ø· Ø£ØµÙØ±ØŒ Ø§Ù„Ø¹Ø§Ù„ÙŠ Ø£Ø®Ø¶Ø±
            if (Math.abs(suggestion.rating) === 6) levelClass = 'high';
            else if (Math.abs(suggestion.rating) === 4) levelClass = 'medium';
            else levelClass = 'low';
          }
          suggestionChip.innerHTML = `
            <div class="suggestion-text" title="${suggestion.text}">${suggestion.text}</div>
            <div class="suggestion-level ${levelClass}">${suggestion.level}</div>
          `;
          
          suggestionsGrid.appendChild(suggestionChip);
        });
      } else {
        suggestionsContainer.classList.add('hidden');
      }
    }

    // Ø¥Ø¶Ø§ÙØ© Ø§Ù‚ØªØ±Ø§Ø­ Ø¥Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
    function addSuggestionToInput(text, rating) {
      const currentInputs = questionInputs.querySelectorAll('.input-group');
      let addedToExisting = false;

      // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø­Ù‚Ù„ ÙØ§Ø±Øº ÙÙŠ Ø§Ù„Ù€3 Ø§Ù„Ø£Ø³Ø§Ø³ÙŠÙŠÙ†
      for (let i = 0; i < Math.min(3, currentInputs.length); i++) {
        const input = currentInputs[i].querySelector('input');
        const select = currentInputs[i].querySelector('select');
        
        if (!input.value.trim()) {
          input.value = text;
          select.value = rating.toString();
          addedToExisting = true;
          break;
        }
      }

      // Ø¥Ø°Ø§ Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ø­Ù‚Ù„ Ù…ÙˆØ¬ÙˆØ¯ØŒ Ø£Ù†Ø´Ø¦ Ø­Ù‚Ù„ Ø¬Ø¯ÙŠØ¯
      if (!addedToExisting && questionInputs.children.length < 6) {
        const stage = stages[currentStageIndex];
        addInputField(questionInputs, text, rating, stage, questionInputs.children.length);
        addInputBtn.disabled = questionInputs.children.length >= 6;
      }

      showToast(t('suggestionAdded'));
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ
    function showQuestion() {
      const passion = passions[currentPassionIndex];
      const stage = stages[currentStageIndex];
      const totalQuestions = passions.length * stages.length;
      const currentQuestion = currentPassionIndex * stages.length + currentStageIndex + 1;
      const remainingQuestions = totalQuestions - currentQuestion;

      // Ø¥Ø¸Ù‡Ø§Ø± Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø´ØºÙ Ø¬Ø¯ÙŠØ¯
      if (currentPassionIndex !== previousPassionIndex) {
        showCurrentPassionModal();
        previousPassionIndex = currentPassionIndex;
        // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø´ØºÙ
        usedSuggestions.clear();
      }

      updateQuestionDisplay();
      
      // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª
      showSuggestions();
      
      // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      saveData();
    }

    function updateQuestionDisplay() {
      const passion = passions[currentPassionIndex];
      const stage = stages[currentStageIndex];
      const totalQuestions = passions.length * stages.length;
      const currentQuestion = currentPassionIndex * stages.length + currentStageIndex + 1;
      const remainingQuestions = totalQuestions - currentQuestion;

      // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
      progressBar.style.width = `${(currentQuestion / totalQuestions) * 100}%`;
      progressText.textContent = t('progressText', { current: currentQuestion, total: totalQuestions });
      remainingText.textContent = t('remainingText', { remaining: remainingQuestions });

      currentPassionEl.textContent = t('passionLabel') + passion;
      currentStageEl.textContent = t('stageLabel') + stage;
      
      // Ø¹Ø±Ø¶ Ø´Ø±Ø­ Ø§Ù„Ù…Ø±Ø­Ù„Ø©
      const explanation = stageExplanations[currentLanguage][stage];
      stageExplanationEl.innerHTML = `
        <h4>${explanation.title}</h4>
        <p><strong>${explanation.why}</strong></p>
        <ul>
          ${explanation.benefits.map(benefit => `<li>${benefit}</li>`).join('')}
        </ul>
        <p><strong>${explanation.howHelps}</strong></p>
        <ul>
          ${explanation.helpPoints.map(point => `<li>${point}</li>`).join('')}
        </ul>
      `;
      
      guidingQuestionEl.textContent = guidingQuestions[currentLanguage][stage];

      questionInputs.innerHTML = '';
      const currentAnswers = answers[passion][stage];
      const inputCount = currentAnswers.length || 3;

      for (let i = 0; i < inputCount; i++) {
        addInputField(questionInputs, currentAnswers[i]?.text || '', currentAnswers[i]?.rating || 0, stage, i);
      }

      addInputBtn.disabled = inputCount >= 6;
      prevQuestionBtn.disabled = currentQuestion === 1;
    }

    // Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„
    function addInputField(container, text = '', rating = 0, stage, index) {
      const div = document.createElement('div');
      div.className = 'input-group';
      
      const inputWrapper = document.createElement('div');
      inputWrapper.className = 'input-wrapper';
      
      const input = document.createElement('input');
      input.type = 'text';
      input.className = 'input';
      input.value = text;
      input.placeholder = t('answerPlaceholder');
      inputWrapper.appendChild(input);
      
      // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„Ù†ØµÙŠØ­Ø©
      const hintButton = document.createElement('button');
      hintButton.className = 'hint-button';
      hintButton.type = 'button';
      hintButton.innerHTML = 'ğŸ’¡';
      
      const hintTooltip = document.createElement('div');
      hintTooltip.className = 'hint-tooltip';
      
      // Ø§Ø®ØªÙŠØ§Ø± Ù†ØµÙŠØ­Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
      const hints = stageHints[currentLanguage][stage];
      const randomHint = hints[Math.floor(Math.random() * hints.length)];
      hintTooltip.textContent = randomHint;
      
      hintButton.appendChild(hintTooltip);
      inputWrapper.appendChild(hintButton);
      div.appendChild(inputWrapper);
      
      // ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ù‡Ù…ÙŠØ© Ø§Ù„Ù†Ø³Ø¨ÙŠØ©
      const isProblems = stage === 'Problems';
      const selectLabel = document.createElement('label');
      selectLabel.textContent = t('relativeImportance');
      selectLabel.style.minWidth = '100px';
      selectLabel.style.fontWeight = '500';
      div.appendChild(selectLabel);
      
      const select = document.createElement('select');
      select.className = 'select';
      
      const options = [
        { value: '', label: t('selectLevel') },
        { value: isProblems ? '-2' : '2', label: `${t(isProblems ? 'lowImportance' : 'lowImportance')} (${isProblems ? '-2' : '2'})` },
        { value: isProblems ? '-4' : '4', label: `${t(isProblems ? 'mediumImportance' : 'mediumImportance')} (${isProblems ? '-4' : '4'})` },
        { value: isProblems ? '-6' : '6', label: `${t(isProblems ? 'highImportance' : 'highImportance')} (${isProblems ? '-6' : '6'})` }
      ];
      
      options.forEach(option => {
        const optionEl = document.createElement('option');
        optionEl.value = option.value;
        optionEl.textContent = option.label;
        if (rating.toString() === option.value) {
          optionEl.selected = true;
        }
        select.appendChild(optionEl);
      });
      
      div.appendChild(select);
      
      if (index >= 3) {
        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'button button-outline';
        deleteBtn.style.padding = '0.5rem';
        deleteBtn.style.minWidth = 'auto';
        deleteBtn.innerHTML = '<svg class="icon"><use xlink:href="#icon-trash"></use></svg>';
        deleteBtn.onclick = function() {
          deleteInputField(this);
        };
        div.appendChild(deleteBtn);
      }
      
      container.appendChild(div);
    }

    // Ù…Ø³Ø­ Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„
    window.deleteInputField = function(button) {
      if (questionInputs.children.length > 3) {
        button.parentElement.remove();
        addInputBtn.disabled = questionInputs.children.length >= 6;
      }
    };

    // Ø¥Ø¶Ø§ÙØ© Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ø¯ÙŠØ¯
    addInputBtn.addEventListener('click', () => {
      if (questionInputs.children.length < 6) {
        addInputField(questionInputs, '', 0, stages[currentStageIndex], questionInputs.children.length);
        addInputBtn.disabled = questionInputs.children.length >= 6;
      }
    });

    // Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚
    prevQuestionBtn.addEventListener('click', () => {
      if (currentStageIndex > 0) {
        currentStageIndex--;
      } else if (currentPassionIndex > 0) {
        currentPassionIndex--;
        currentStageIndex = stages.length - 1;
      }
      showQuestion();
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
    nextQuestionBtn.addEventListener('click', () => {
      const passion = passions[currentPassionIndex];
      const stage = stages[currentStageIndex];
      const inputGroups = questionInputs.querySelectorAll('.input-group');
      const newAnswers = [];

      let valid = true;
      inputGroups.forEach(group => {
        const text = group.querySelector('input').value.trim();
        const select = group.querySelector('select');
        const rating = select.value;
        
        if (text && rating) {
          newAnswers.push({ text, rating: parseInt(rating) });
        } else {
          valid = false;
        }
      });

      if (!valid) {
        questionError.style.display = 'block';
        setTimeout(() => {
          questionError.style.display = 'none';
        }, 3000);
        return;
      }

      answers[passion][stage] = newAnswers;

      currentStageIndex++;
      if (currentStageIndex >= stages.length) {
        currentStageIndex = 0;
        currentPassionIndex++;
      }
      if (currentPassionIndex >= passions.length) {
        currentStep = "results";
        saveData();
        showResults();
      } else {
        showQuestion();
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      }
    });

    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    function showResults() {
      questionSection.classList.add('hidden');
      resultsSection.classList.remove('hidden');
      personalAdviceAdded = false; // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…ØªØºÙŠØ± Ø¹Ù†Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
      updateResultsDisplay();
    }

    function updateResultsDisplay() {
      resultsTable.innerHTML = '';

      let passionResults = [];

      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
      passions.forEach(passion => {
        const stageSums = stages.map(stage => 
          answers[passion][stage].reduce((sum, ans) => sum + parseInt(ans.rating), 0)
        );
        const total = stageSums.reduce((sum, val) => sum + val, 0);
        
        passionResults.push({
          passion: passion,
          stageSums: stageSums,
          total: total
        });
      });

      // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„
      passionResults.sort((a, b) => b.total - a.total);

      // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø±ØªØ¨Ø©
      passionResults.forEach((result, index) => {
        const row = document.createElement('tr');
        // Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ø§Ø³ Ù„Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø£ÙØ¶Ù„
        if (index === 0) {
          row.classList.add('best-result');
        }
        row.innerHTML = `
          <td>${result.passion}</td>
          ${result.stageSums.map(p => `<td>${p}</td>`).join('')}
          <td style="font-weight: bold;">${result.total}</td>
        `;
        resultsTable.appendChild(row);
      });

      const topPassion = passionResults[0];
      recommendation.innerHTML = `
        <div>
          <h3 style="color: var(--green); margin-bottom: 10px;">${t('recommendedPassion')}</h3>
          <p style="font-size: 1.3em; font-weight: bold; color: var(--primary);">${topPassion.passion}</p>
          <p style="color: var(--text-light); margin-top: 5px;">${t('totalScore', { total: topPassion.total })}</p>
        </div>
      `;

      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© ÙÙ‚Ø· Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„
      const existingHint = document.querySelector('.personal-advice-hint');
      if (!personalAdviceAdded && !existingHint) {
        const hintData = generatePersonalHint(topPassion.passion);
        if (hintData) {
          const hintElement = document.createElement('div');
          hintElement.className = 'result-highlight personal-advice-hint';
          hintElement.style.marginTop = '1.5rem';
          hintElement.style.background = '#fff3cd';
          hintElement.style.borderColor = 'var(--yellow)';
          hintElement.setAttribute('data-ar', hintData.ar);
          hintElement.setAttribute('data-en', hintData.en);
          hintElement.innerHTML = `
            <div>
              <h3 style="color: var(--yellow); margin-bottom: 10px;">${t('personalAdvice')}</h3>
              <p style="font-size: 1em; line-height: 1.6; color: var(--text);">${hintData[currentLanguage]}</p>
            </div>
          `;
          recommendation.parentNode.insertBefore(hintElement, recommendation.nextSibling);
          personalAdviceAdded = true;
        }
      } else if (existingHint) {
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        const hintText = existingHint.getAttribute(`data-${currentLanguage}`);
        if (hintText) {
          const textElement = existingHint.querySelector('p');
          if (textElement) {
            textElement.textContent = hintText;
          }
        }
      }

      // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©
      userPriorityTable.innerHTML = '';
      const sortedPassions = [...passions].sort((a, b) => userPriorities[a] - userPriorities[b]); // ØªØ±ØªÙŠØ¨ Ù…Ù† 1-6
      sortedPassions.forEach(passion => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${passion}</td>
          <td>${userPriorities[passion]}</td>
        `;
        userPriorityTable.appendChild(row);
      });

      // ØªØ­Ø¶ÙŠØ± Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
      preparePrintContent();
    }

    // Ø¯Ø§Ù„Ø© Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©
    function generatePersonalHint(topPassion) {
      const purposeAnswers = answers[topPassion]['Purpose'];
      
      // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£ÙˆÙ„ Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ù…Ø³ØªÙˆÙ‰ Ø¹Ø§Ù„ÙŠ (6 Ù†Ù‚Ø§Ø·) ÙÙŠ Purpose
      const highPurposeAnswer = purposeAnswers.find(answer => parseInt(answer.rating) === 6);
      
      if (highPurposeAnswer) {
        return {
          ar: `Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒØŒ Ø£Ù†Øª Ù…Ù†Ø§Ø³Ø¨ Ø¬Ø¯Ø§Ù‹ Ù„Ù…Ø¬Ø§Ù„ "${topPassion}" Ù„Ø£Ù†Ùƒ Ø°ÙƒØ±Øª: "${highPurposeAnswer.text}". Ù‡Ø°Ø§ ÙŠÙØ¸Ù‡Ø± ÙˆØ¶ÙˆØ­ Ø±Ø¤ÙŠØªÙƒ ÙˆÙ‚ÙˆØ© Ø¯Ø§ÙØ¹ÙŠØªÙƒ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„. Ù†Ù†ØµØ­Ùƒ Ø¨Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ ØªØ·ÙˆÙŠØ± Ù…Ù‡Ø§Ø±Ø§ØªÙƒ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ ÙˆØ§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙØ±Øµ Ø§Ù„ØªÙŠ ØªØªÙ…Ø§Ø´Ù‰ Ù…Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ù‡Ø¯Ù.`,
          en: `Based on your answers, you are very well-suited for "${topPassion}" because you mentioned: "${highPurposeAnswer.text}". This shows clarity in your vision and strong motivation in this field. We recommend focusing on developing your skills in this direction and looking for opportunities that align with this goal.`
        };
      }
      
      // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ù…Ø³ØªÙˆÙ‰ Ø¹Ø§Ù„ÙŠØŒ Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙˆÙ„ Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙˆØ³Ø·
      const mediumPurposeAnswer = purposeAnswers.find(answer => parseInt(answer.rating) === 4);
      
      if (mediumPurposeAnswer) {
        return {
          ar: `Ø£Ù†Øª ØªÙØ¸Ù‡Ø± Ø§Ù‡ØªÙ…Ø§Ù…Ø§Ù‹ ÙˆØ§Ø¶Ø­Ø§Ù‹ Ø¨Ù…Ø¬Ø§Ù„ "${topPassion}" Ø®Ø§ØµØ© ÙÙŠÙ…Ø§ ÙŠØªØ¹Ù„Ù‚ Ø¨Ù€ "${mediumPurposeAnswer.text}". Ù†Ù†ØµØ­Ùƒ Ø¨Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ Ø§Ø³ØªÙƒØ´Ø§Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ ÙˆØªØ·ÙˆÙŠØ± ÙÙ‡Ù…Ùƒ Ù„Ù‡ Ø£ÙƒØ«Ø±.`,
          en: `You show clear interest in "${topPassion}" especially regarding "${mediumPurposeAnswer.text}". We recommend continuing to explore this field and developing your understanding of it further.`
        };
      }
      
      // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…Ù†Ø§Ø³Ø¨Ø©ØŒ Ø£Ø¹Ø·Ù Ù†ØµÙŠØ­Ø© Ø¹Ø§Ù…Ø©
      return {
        ar: `Ù…Ø¬Ø§Ù„ "${topPassion}" ÙŠØ¨Ø¯Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ Ù„Ùƒ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ. Ù†Ù†ØµØ­Ùƒ Ø¨Ø§Ù„ØªØ¹Ù…Ù‚ Ø£ÙƒØ«Ø± ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ ÙˆØ§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„ÙØ±Øµ Ø§Ù„Ù…ØªØ§Ø­Ø© ÙÙŠÙ‡.`,
        en: `"${topPassion}" appears to be the most suitable for you based on your answers. We recommend delving deeper into this field and exploring the opportunities available in it.`
      };
    }

    // ØªØ­Ø¶ÙŠØ± Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
    function preparePrintContent() {
      // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´ØºÙ
      const printPassionsContent = document.getElementById('print-passions-content');
      printPassionsContent.innerHTML = '';
      const passionsTable = document.createElement('table');
      
      let passionsHtml = `<tr><th>${currentLanguage === 'ar' ? 'Ø§Ù„Ø´ØºÙ' : 'Passion'}</th><th>${currentLanguage === 'ar' ? 'Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ØµÙ„ÙŠ' : 'Original Priority'}</th></tr>`;
      
      passions.forEach(passion => {
        passionsHtml += `<tr><td>${passion}</td><td>${userPriorities[passion]}</td></tr>`;
      });
      
      passionsTable.innerHTML = passionsHtml;
      printPassionsContent.appendChild(passionsTable);
      
      // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      const printAnswersContent = document.getElementById('print-answers-content');
      printAnswersContent.innerHTML = '';

      // Ø­Ø³Ø§Ø¨ ÙˆØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      let passionResults = [];
      passions.forEach(passion => {
        const stageSums = stages.map(stage => 
          answers[passion][stage].reduce((sum, ans) => sum + parseInt(ans.rating), 0)
        );
        const total = stageSums.reduce((sum, val) => sum + val, 0);
        
        passionResults.push({
          passion: passion,
          stageSums: stageSums,
          total: total
        });
      });

      // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„
      passionResults.sort((a, b) => b.total - a.total);

      passionResults.forEach((result, index) => {
        const passionDiv = document.createElement('div');
        passionDiv.className = 'print-passion-section';
        
        const passionTitle = document.createElement('h3');
        passionTitle.className = 'print-passion-title';
        passionTitle.textContent = t('passionTitle', { index: index + 1, passion: result.passion });
        passionDiv.appendChild(passionTitle);
        
        stages.forEach(stage => {
          const stageDiv = document.createElement('div');
          stageDiv.className = 'print-stage-section';
          
          const stageTitle = document.createElement('h4');
          stageTitle.className = 'print-stage-title';
          stageTitle.textContent = stage;
          stageDiv.appendChild(stageTitle);
          
          const questionP = document.createElement('p');
          questionP.className = 'print-question';
          questionP.textContent = t('guidingQuestionLabel', { question: guidingQuestions[currentLanguage][stage] });
          stageDiv.appendChild(questionP);
          
          const answersList = document.createElement('ul');
          answersList.className = 'print-answers';
          
          // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
          const sortedAnswers = [...answers[result.passion][stage]].sort((a, b) => {
            if (stage === 'Problems') {
              return parseInt(b.rating) - parseInt(a.rating);
            }
            return parseInt(b.rating) - parseInt(a.rating);
          });
          
          sortedAnswers.forEach(answer => {
            const answerItem = document.createElement('li');
            answerItem.className = 'print-answer-item';
            
            const ratingSpan = document.createElement('span');
            ratingSpan.className = 'print-answer-rating';
            ratingSpan.textContent = `[${answer.rating}] `;
            
            answerItem.appendChild(ratingSpan);
            answerItem.appendChild(document.createTextNode(answer.text));
            answersList.appendChild(answerItem);
          });
          
          stageDiv.appendChild(answersList);
          passionDiv.appendChild(stageDiv);
        });

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
        const totalDiv = document.createElement('div');
        totalDiv.className = 'print-total';
        totalDiv.textContent = t('totalLabel', { total: result.total });
        passionDiv.appendChild(totalDiv);
        
        printAnswersContent.appendChild(passionDiv);
      });
      
      // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      const printResultsContent = document.getElementById('print-results-content');
      printResultsContent.innerHTML = '';

      const resultsTable = document.createElement('table');
      
      let resultsHtml = `<tr><th>${currentLanguage === 'ar' ? 'Ø§Ù„ØªØ±ØªÙŠØ¨' : 'Rank'}</th><th>${currentLanguage === 'ar' ? 'Ø§Ù„Ø´ØºÙ' : 'Passion'}</th>`;
      stages.forEach(stage => {
        resultsHtml += `<th>${stage}</th>`;
      });
      resultsHtml += `<th>${currentLanguage === 'ar' ? 'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ' : 'Total'}</th></tr>`;

      // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø±ØªØ¨Ø©
      passionResults.forEach((result, index) => {
        const rowClass = index === 0 ? 'class="best-result"' : '';
        resultsHtml += `<tr ${rowClass}><td>${index + 1}</td><td>${result.passion}</td>`;
        result.stageSums.forEach(sum => {
          resultsHtml += `<td>${sum}</td>`;
        });
        resultsHtml += `<td>${result.total}</td></tr>`;
      });

      resultsTable.innerHTML = resultsHtml;
      printResultsContent.appendChild(resultsTable);

      const topPassion = passionResults[0];
      const recommendationDiv = document.createElement('div');
      recommendationDiv.className = 'print-recommendation';
      recommendationDiv.innerHTML = `
        <h3>${t('finalRecommendation')}</h3>
        <p>${t('recommendedPassionText', { passion: topPassion.passion })}</p>
        <p>${t('totalScoreText', { total: topPassion.total })}</p>
      `;
      printResultsContent.appendChild(recommendationDiv);

      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
      const hintData = generatePersonalHint(topPassion.passion);
      if (hintData) {
        const hintDiv = document.createElement('div');
        hintDiv.className = 'print-hint';
        hintDiv.innerHTML = `
          <h3>${t('personalAdviceTitle')}</h3>
          <p>${hintData[currentLanguage]}</p>
        `;
        printResultsContent.appendChild(hintDiv);
      }
    }

    // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±
    printReportBtn.addEventListener('click', () => {
      window.print();
    });

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
    downloadReportBtn.addEventListener('click', () => {
      // Ø¥Ù†Ø´Ø§Ø¡ Ù†Øµ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
      let reportText = t('reportTitle') + "\n";
      reportText += t('reportSeparator').repeat(50) + "\n\n";
      
      // Ø­Ø³Ø§Ø¨ ÙˆØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      let passionResults = [];
      passions.forEach(passion => {
        const stageSums = stages.map(stage => 
          answers[passion][stage].reduce((sum, ans) => sum + parseInt(ans.rating), 0)
        );
        const total = stageSums.reduce((sum, val) => sum + val, 0);
        
        passionResults.push({
          passion: passion,
          stageSums: stageSums,
          total: total
        });
      });

      // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„
      passionResults.sort((a, b) => b.total - a.total);

      // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
      passionResults.forEach((result, index) => {
        reportText += t('passionTitle', { index: index + 1, passion: result.passion }) + "\n";
        reportText += "-".repeat(30) + "\n\n";
        
        stages.forEach(stage => {
          reportText += `${stage}:\n`;
          reportText += t('guidingQuestionLabel', { question: guidingQuestions[currentLanguage][stage] }) + "\n";
          
          // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„)
          const sortedAnswers = [...answers[result.passion][stage]].sort((a, b) => {
            // Ù„Ù„Ù€ Problems Ù†Ø±ØªØ¨ Ù…Ù† Ø§Ù„Ø£Ù‚Ù„ Ø³Ù„Ø¨ÙŠØ© Ù„Ù„Ø£ÙƒØ«Ø± Ø³Ù„Ø¨ÙŠØ© (Ø§Ù„Ø£Ù‚Ù„ Ù‚Ù„Ù‚Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹)
            if (stage === 'Problems') {
              return parseInt(b.rating) - parseInt(a.rating); // Ù…Ù† -2 Ø¥Ù„Ù‰ -6
            }
            // Ù„Ù„Ø¨Ø§Ù‚ÙŠ Ù†Ø±ØªØ¨ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„
            return parseInt(b.rating) - parseInt(a.rating);
          });
          
          sortedAnswers.forEach(answer => {
            reportText += `- ${answer.text} ${t('ratingLabel', { rating: answer.rating })}\n`;
          });
          reportText += "\n";
        });
        
        reportText += t('totalLabel', { total: result.total }) + "\n";
        reportText += t('reportSeparator').repeat(50) + "\n\n";
      });
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙˆØµÙŠØ© ÙˆØ§Ù„Ù†ØµÙŠØ­Ø©
      const topPassion = passionResults[0];
      reportText += t('finalRecommendationTitle') + "\n";
      reportText += "-".repeat(20) + "\n";
      reportText += t('recommendationText', { passion: topPassion.passion, total: topPassion.total }) + "\n\n";
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©
      const hintData = generatePersonalHint(topPassion.passion);
      if (hintData) {
        reportText += t('personalAdviceLabel') + "\n";
        reportText += "-".repeat(15) + "\n";
        reportText += `${hintData[currentLanguage]}\n\n`;
      }
      
      reportText += t('originalOrderTitle') + "\n";
      reportText += "-".repeat(35) + "\n";
      const sortedPassions = [...passions].sort((a, b) => userPriorities[a] - userPriorities[b]);
      sortedPassions.forEach((passion, index) => {
        reportText += `${index + 1}. ${passion} ${t('priorityLabel', { priority: userPriorities[passion] })}\n`;
      });
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ù†ØµÙŠ Ù„Ù„ØªØ­Ù…ÙŠÙ„
      const blob = new Blob([reportText], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = t('fileName');
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });

    // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
    restartTestBtn.addEventListener('click', () => {
      if (confirm(t('confirmRestart'))) {
        localStorage.removeItem('6ps_journey_data_bilingual');
        usedSuggestions.clear(); // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
        location.reload();
      }
    });

    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø© Ø£Ùˆ ØªØ­Ø¯ÙŠØ«Ù‡Ø§
    window.addEventListener('beforeunload', () => {
      saveData();
    });

    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('modal-overlay') || e.target.classList.contains('stage-info-modal')) {
        e.target.classList.remove('active');
      }
    });

    // Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
    function showCurrentStageModal() {
      const stage = stages[currentStageIndex];
      const explanation = stageExplanations[currentLanguage][stage];
      
      document.getElementById('current-stage-modal-title').textContent = explanation.title;
      document.getElementById('current-stage-modal-description').textContent = explanation.why;
      
      const modal = document.getElementById('current-stage-modal');
      modal.classList.add('active');
      
      // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
      setTimeout(() => {
        modal.classList.remove('active');
      }, 2000);
    }

    // Ø¯Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø´ØºÙ Ø§Ù„Ø­Ø§Ù„ÙŠ
    function showCurrentPassionModal() {
      const passion = passions[currentPassionIndex];
      const stage = stages[currentStageIndex];
      const explanation = stageExplanations[currentLanguage][stage];
      
      document.getElementById('current-stage-modal-title').textContent = `${t('passionLabel')}${passion}`;
      document.getElementById('current-stage-modal-description').textContent = t('nowAnswering', { passion });
      
      const modal = document.getElementById('current-stage-modal');
      modal.classList.add('active');
      
      // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
      setTimeout(() => {
        modal.classList.remove('active');
      }, 2000);
    }
  </script>
</body>
</html>
