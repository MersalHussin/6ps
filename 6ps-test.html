<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø±Ø­Ù„Ø© 6Ps - Ø§ÙƒØªØ´Ù Ù…ÙŠÙˆÙ„Ùƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="icon" href="assets/LogoIC.png">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #052ed8;
      --green: #00c309;
      --yellow: #f1c900;
      --background: #f8faff;
      --card-bg: #ffffff;
      --text: #0f172a;
      --text-light: #64748b;
      --border: #e2e8f0;
      --error: #ef4444;
      --radius: 12px;
      --shadow: 0 4px 12px rgba(5, 46, 216, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Tajawal', sans-serif;
      background: var(--background);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    h1 {
      font-size: clamp(1.8rem, 4vw, 2.5rem);
      text-align: center;
      margin: 2rem 0;
      color: var(--primary);
      font-weight: 700;
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 2rem;
      overflow: hidden;
      border: 1px solid var(--border);
    }

    .card-header {
      padding: 1.5rem;
      background: var(--primary);
      color: white;
    }

    .card-title {
      font-size: 1.4rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .card-description {
      color: rgba(255, 255, 255, 0.9);
      font-size: 0.95rem;
    }

    .card-content {
      padding: 1.5rem;
    }

    .card-footer {
      padding: 1.5rem;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
      background: #f8fafc;
    }

    .input-group {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .input-wrapper {
      flex: 1;
      position: relative;
      min-width: 250px;
    }

    .input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      font-family: 'Tajawal', sans-serif;
      font-size: 1rem;
      transition: border-color 0.2s ease;
    }

    .input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .hint-button {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      background: var(--yellow);
      border: none;
      cursor: pointer;
      color: #333;
      font-size: 10px;
      padding: 10px;
      border-radius: 50%;
      transition: all 0.2s ease;
      z-index: 10;
    }

    .hint-button:hover {
      transform: translateY(-50%) scale(1.1);
    }

    .hint-tooltip {
      position: absolute;
      left: -10px;
      bottom: 100%;
      margin-bottom: 10px;
      background: var(--text);
      color: white;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 0.85rem;
      line-height: 1.4;
      width: 280px;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1000;
      text-align: right;
    }

    .hint-tooltip::after {
      content: '';
      position: absolute;
      top: 100%;
      left: 20px;
      border: 6px solid transparent;
      border-top-color: var(--text);
    }

    .hint-button:hover .hint-tooltip {
      opacity: 1;
      visibility: visible;
    }

    .select {
      padding: 0.75rem 1rem;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      font-family: 'Tajawal', sans-serif;
      font-size: 1rem;
      background: white;
      min-width: 140px;
      cursor: pointer;
    }

    .select:focus {
      outline: none;
      border-color: var(--green);
    }

    .button {
      background: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      padding: 0.75rem 1.5rem;
      font-family: 'Tajawal', sans-serif;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      min-width: 120px;
    }

    .button:hover {
      background: #041db8;
      transform: translateY(-1px);
    }

    .button:disabled {
      background: #cacaca;
      color: white;
      cursor: not-allowed;
      transform: none;
    }

    .button-outline {
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .button-outline:hover {
      background: var(--primary);
      color: white;
    }

    .button-success {
      background: var(--green);
    }

    .button-success:hover {
      background: #009907;
    }

    .button-warning {
      background: var(--yellow);
      color: #333;
    }

    .button-warning:hover {
      background: #d1a800;
    }

    /* ØªØ¨Ø³ÙŠØ· Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ */
    .table-container {
      overflow-x: auto;
      margin: 1rem 0;
      border-radius: var(--radius);
      border: 1px solid var(--border);
    }

    .table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      min-width: 600px;
    }

    .table th,
    .table td {
      padding: 1rem;
      text-align: right;
      border-bottom: 1px solid var(--border);
    }

    .table th {
      background: var(--primary);
      color: white;
      font-weight: 600;
      font-size: 0.9rem;
      white-space: nowrap;
    }

    .table tr:hover {
      background: #f8fafc;
    }

    .table-actions {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
    }

    .action-button {
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 6px;
      padding: 0.4rem;
      cursor: pointer;
      font-size: 0.8rem;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
    }

    .action-button:hover {
      transform: translateY(-1px);
    }

    .delete-button {
      background: var(--error);
    }

    .action-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .alert {
      padding: 1rem;
      border-radius: var(--radius);
      margin-bottom: 1rem;
      display: none;
      font-weight: 500;
      background: rgba(239, 68, 68, 0.1);
      color: var(--error);
      border: 1px solid rgba(239, 68, 68, 0.2);
    }

    .progress-container {
      width: 100%;
      height: 8px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 4px;
      margin-bottom: 1rem;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--green), var(--yellow), var(--primary));
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    .progress-text {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 1rem;
      font-weight: 500;
    }

    .guiding-question {
      font-size: 1.1rem;
      color: var(--text);
      margin-bottom: 1.5rem;
      padding: 1.5rem;
      background: #f0f4ff;
      border-radius: var(--radius);
      border-right: 4px solid var(--primary);
    }

    .hidden {
      display: none;
    }

    .result-highlight {
      background: #f0f4ff;
      padding: 1.5rem;
      border-radius: var(--radius);
      margin: 1.5rem 0;
      border: 2px solid var(--primary);
      font-size: 1.2rem;
      font-weight: 600;
      text-align: center;
    }

    .section-title {
      font-size: 1.3rem;
      font-weight: 600;
      margin: 2rem 0 1rem;
      color: var(--primary);
      border-bottom: 2px solid var(--green);
      padding-bottom: 0.5rem;
    }

    .toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--primary);
      color: white;
      padding: 1rem 2rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      text-align: center;
      font-weight: 500;
    }

    .toast.show {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(10px);
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: white;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--primary);
      color: white;
    }

    .modal-title {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .modal-close {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0.5rem;
      border-radius: 50%;
    }

    .modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .modal-body {
      padding: 1.5rem;
    }

    .modal-footer {
      padding: 1.5rem;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      gap: 1rem;
      flex-wrap: wrap;
    }

    .print-only {
      display: none;
    }

    .icon {
      display: inline-block;
      width: 16px;
      height: 16px;
      stroke-width: 0;
      stroke: currentColor;
      fill: currentColor;
    }

    .best-result {
      background: #e8f5e8 !important;
      color: var(--green) !important;
      font-weight: bold !important;
    }

    /* Print styles */
    @media print {
      * {
        -webkit-print-color-adjust: exact !important;
        color-adjust: exact !important;
      }

      body {
        background: white !important;
        font-size: 12pt;
        margin: 0;
        padding: 0;
        color: black;
        font-family: 'Tajawal', Arial, sans-serif;
      }

      .container {
        width: 100%;
        max-width: none;
        padding: 20px;
        margin: 0 auto;
      }

      .print-content {
        width: 100%;
        margin: 0 auto;
        text-align: center;
      }

      .print-section {
        width: 100%;
        margin-bottom: 30px;
        page-break-inside: avoid;
        text-align: center;
      }

      .print-header {
        text-align: center;
        margin-bottom: 30px;
        border-bottom: 3px solid #052ed8;
        padding-bottom: 20px;
      }

      .print-header h1 {
        color: #052ed8 !important;
        font-size: 24pt;
        margin-bottom: 10px;
        font-weight: bold;
      }

      table {
        width: 90%;
        margin: 20px auto;
        border-collapse: collapse;
        font-size: 11pt;
        border: 1px solid #ddd;
      }

      th, td {
        padding: 12px 8px;
        border: 1px solid #ddd;
        text-align: center;
      }

      th {
        background-color: #f0f4ff !important;
        color: #052ed8 !important;
        font-weight: bold;
      }

      .best-result {
        background-color: #e8f5e8 !important;
        color: #00c309 !important;
        font-weight: bold !important;
      }

      .print-passion-section {
        width: 90%;
        margin: 0 auto 25px auto;
        border: 2px solid #052ed8;
        border-radius: 8px;
        padding: 20px;
        page-break-inside: avoid;
        background: #fafbff;
      }

      .print-passion-title {
        color: #052ed8 !important;
        font-size: 16pt;
        font-weight: bold;
        margin-bottom: 15px;
        text-align: center;
        border-bottom: 2px solid #00c309;
        padding-bottom: 8px;
      }

      .print-stage-section {
        margin-bottom: 15px;
        padding: 10px;
        background: white;
        border-radius: 6px;
        border: 1px solid #e0e7ff;
      }

      .print-stage-title {
        color: #00c309 !important;
        font-size: 14pt;
        font-weight: bold;
        margin-bottom: 10px;
        text-align: center;
      }

      .print-question {
        font-style: italic;
        color: #666 !important;
        margin-bottom: 10px;
        font-size: 11pt;
        background-color: #f8f9ff;
        padding: 10px;
        border-radius: 6px;
        text-align: right;
        line-height: 1.5;
      }

      .print-answers {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .print-answer-item {
        margin-bottom: 6px;
        font-size: 11pt;
        padding: 8px 12px;
        background: #f9f9f9;
        border-radius: 4px;
        text-align: right;
        border-right: 3px solid #052ed8;
      }

      .print-total {
        background: #fff3cd !important;
        border: 2px solid #f1c900 !important;
        color: #856404 !important;
        padding: 12px;
        text-align: center;
        font-weight: bold;
        border-radius: 6px;
        margin-top: 10px;
        font-size: 13pt;
      }

      .print-recommendation {
        background: #e8f5e8 !important;
        border: 3px solid #00c309 !important;
        color: #00c309 !important;
        padding: 20px;
        text-align: center;
        font-weight: bold;
        border-radius: 10px;
        margin: 20px auto;
        font-size: 15pt;
        width: 80%;
      }

      .print-hint {
        background: #fff3cd !important;
        border: 2px solid #f1c900 !important;
        color: #856404 !important;
        padding: 15px;
        border-radius: 8px;
        margin: 15px auto;
        line-height: 1.6;
        font-size: 12pt;
        width: 80%;
        text-align: right;
      }

      .no-print {
        display: none !important;
      }

      .print-only {
        display: block !important;
      }

      @page {
        margin: 2cm;
        size: A4;
      }
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }

      h1 {
        font-size: 1.8rem;
        margin: 1rem 0;
      }

      .card-header,
      .card-content,
      .card-footer {
        padding: 1rem;
      }

      .card-footer {
        flex-direction: column-reverse;
        align-items: stretch;
      }

      .card-footer .button {
        width: 100%;
        margin-bottom: 0.5rem;
      }

      .input-group {
        flex-direction: column;
        align-items: stretch;
      }

      .input-wrapper {
        min-width: auto;
      }

      .select {
        width: 100%;
        min-width: auto;
      }

      .button {
        width: 100%;
        min-width: auto;
      }

      /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
      .table-container {
        margin: 0.5rem 0;
      }

      .table {
        min-width: auto;
        font-size: 0.85rem;
      }

      .table th,
      .table td {
        padding: 0.5rem 0.3rem;
        font-size: 0.8rem;
      }

      .table th {
        font-size: 0.75rem;
      }

      .table-actions {
        flex-direction: row;
        gap: 0.25rem;
      }

      .action-button {
        width: 28px;
        height: 28px;
        font-size: 0.7rem;
      }

      .hint-tooltip {
        width: 250px;
        left: -50px;
        font-size: 0.8rem;
      }

      .progress-text {
        font-size: 0.8rem;
      }

      .guiding-question {
        font-size: 1rem;
        padding: 1rem;
      }

      .result-highlight {
        font-size: 1.1rem;
        padding: 1rem;
      }

      .modal {
        width: 95%;
        margin: 10px;
      }

      .modal-footer {
        flex-direction: column;
      }

      .modal-footer .button {
        width: 100%;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 10px;
      }

      h1 {
        font-size: 1.5rem;
      }

      .card-header,
      .card-content,
      .card-footer {
        padding: 0.75rem;
      }

      .table th,
      .table td {
        padding: 10px 15px ;
        font-size: 0.75rem;
      }

      .table th {
        font-size: 0.7rem;
      }

      .action-button {
        width: 24px;
        height: 24px;
      }

      .hint-tooltip {
        width: 200px;
        left: -5px;
      }
    }

    @media (min-width: 769px) and (max-width: 1024px) {
      .container {
        padding: 18px;
      }

      .table th,
      .table td {
        padding: 0.8rem;
      }
    }

    /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
    @media (min-width: 1200px) {
      .table th,
      .table td {
        padding: 1.2rem;
      }
    }

    .Logo-image{
      width: 250px;
    display: flex
;
    justify-content: center;
    align-items: center;
    margin: auto;
    }
       .Language-button{
        color: white;
        background-color: var(--green);
        font-size: 20px;
        position: absolute;
        text-decoration: none;
        padding: 5px 15px;
        border-radius: 10px;
    }

  </style>
</head>
<body>
  <div class="container">
    <a href="/6ps/6ps-test-en.html" class="Language-button">Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</a>
    <img src="assets/Logo.png" alt="Logo Qudraat Shabab" class="Logo-image">
    <h1>Ø±Ø­Ù„Ø© 6Ps - Ø§ÙƒØªØ´Ù Ù…ÙŠÙˆÙ„Ùƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</h1>

    <!-- Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø´ØºÙ -->
    <div id="passion-selection" class="card">
      <div class="card-header">
        <h2 class="card-title">Ø£Ø¯Ø®Ù„ 6 Ø´ØºÙ</h2>
        <p class="card-description">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø´ØºÙ Ø§Ù„Ø°ÙŠ ØªÙ‡ØªÙ… Ø¨Ù‡. ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ø§Ù„ØªØ±ØªÙŠØ¨ Ù„Ø§Ø­Ù‚Ø§Ù‹.</p>
      </div>
      <div class="card-content">
        <div id="passion-error" class="alert">Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø´ØºÙ ØµØ§Ù„Ø­ (Ù…Ø«Ù„: Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø§Ù„ØªØµÙ…ÙŠÙ…)!</div>
        <div class="input-group">
          <div class="input-wrapper">
            <input type="text" id="passion-input" class="input" placeholder="Ø£Ø¯Ø®Ù„ Ø´ØºÙÙƒ (Ù…Ø«Ù„: Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©)">
            <button class="hint-button" type="button">
              ğŸ’¡
              <div class="hint-tooltip">
                Ø£Ù…Ø«Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´ØºÙ: Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©ØŒ Ø§Ù„ØªØµÙ…ÙŠÙ…ØŒ Ø§Ù„ØªØ¯Ø±ÙŠØ³ØŒ Ø§Ù„Ø·Ø¨Ø®ØŒ Ø§Ù„ÙƒØªØ§Ø¨Ø©ØŒ Ø§Ù„ØªØµÙˆÙŠØ±ØŒ Ø§Ù„Ø±ÙŠØ§Ø¶Ø©ØŒ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ØŒ Ø±ÙŠØ§Ø¯Ø© Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ØŒ Ø§Ù„Ø·Ø¨ØŒ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©ØŒ Ø§Ù„ØªØ³ÙˆÙŠÙ‚
              </div>
            </button>
          </div>
          <button id="add-passion" class="button">Ø¥Ø¶Ø§ÙØ©</button>
        </div>
        <div class="table-container">
          <table id="passion-table" class="table">
            <thead>
              <tr>
                <th>Ø§Ù„Ø´ØºÙ</th>
                <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
                <th>Ø¥Ø¬Ø±Ø§Ø¡</th>
              </tr>
            </thead>
            <tbody id="passion-list"></tbody>
          </table>
        </div>
      </div>
      <div class="card-footer">
        <button id="start-journey" class="button button-success" disabled>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø±Ø­Ù„Ø©</button>
      </div>
    </div>

    <!-- Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
    <div id="question-section" class="card hidden">
      <div class="card-header">
        <div class="progress-container">
          <div id="progress-bar" class="progress-bar" style="width: 0%"></div>
        </div>
        <div class="progress-text">
          <span id="progress-text">Ø§Ù„Ø³Ø¤Ø§Ù„ 1 Ù…Ù† 30</span>
          <span id="remaining-text">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 29</span>
        </div>
        <h2 id="current-passion" class="card-title">Ø§Ù„Ø´ØºÙ: </h2>
        <h3 id="current-stage" class="card-description">Ø§Ù„Ù…Ø±Ø­Ù„Ø©: </h3>
      </div>
      <div class="card-content">
        <div id="guiding-question" class="guiding-question"></div>
        <div id="question-error" class="alert">Ø£Ø¯Ø®Ù„ Ø¥Ø¬Ø§Ø¨Ø© ØµØ§Ù„Ø­Ø© Ù„ÙƒÙ„ Ø­Ù‚Ù„ Ù…Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…!</div>
        <div id="question-inputs"></div>
        <button id="add-input" class="button button-outline">Ø¥Ø¶Ø§ÙØ© Ø¥Ø¯Ø®Ø§Ù„</button>
      </div>
      <div class="card-footer">
        <button id="prev-question" class="button button-outline" disabled>Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        <button id="next-question" class="button button-success">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </div>
    </div>

    <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
    <div id="results-section" class="card hidden">
      <div class="card-header">
        <h2 class="card-title">Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>
      </div>
      <div class="card-content">
        <h3 class="section-title">Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h3>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Ø§Ù„Ø´ØºÙ</th>
                <th>Purpose</th>
                <th>Problems</th>
                <th>Power</th>
                <th>Proof</th>
                <th>Possible</th>
                <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
              </tr>
            </thead>
            <tbody id="results-table"></tbody>
          </table>
        </div>
        <div id="recommendation" class="result-highlight"></div>
        <h3 class="section-title">Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø°ÙŠ Ø§Ø®ØªØ±ØªÙ‡</h3>
        <div class="table-container">
          <table class="table">
            <thead>
              <tr>
                <th>Ø§Ù„Ø´ØºÙ</th>
                <th>Ø§Ù„ØªØ±ØªÙŠØ¨</th>
              </tr>
            </thead>
            <tbody id="user-priority-table"></tbody>
          </table>
        </div>
      </div>
      <div class="card-footer">
        <button id="restart-test" class="button button-outline">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
          <button id="print-report" class="button button-success">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
          <button id="download-report" class="button button-warning">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
        </div>
      </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div id="toast" class="toast"></div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
    <div id="restore-modal" class="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h3 class="modal-title">Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
          <button class="modal-close" onclick="closeModal('restore-modal')">&times;</button>
        </div>
        <div class="modal-body">
          <p>ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù…Ù† Ø¬Ù„Ø³Ø© Ø³Ø§Ø¨Ù‚Ø©. Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯ØªÙ‡Ø§ ÙˆØ§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±ØŸ</p>
        </div>
        <div class="modal-footer">
          <button class="button button-outline" onclick="clearSavedData()">Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯</button>
          <button class="button button-success" onclick="restoreSavedData()">Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
        </div>
      </div>
    </div>

    <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© -->
    <div id="print-content" class="print-only">
      <div class="print-header">
        <h1>ØªÙ‚Ø±ÙŠØ± Ø±Ø­Ù„Ø© 6Ps - Ø§ÙƒØªØ´Ù Ù…ÙŠÙˆÙ„Ùƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</h1>
        <p style="color: #666; font-size: 12pt; margin-top: 10px;">ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬</p>
      </div>
      <div class="print-content">
        <div id="print-passions" class="print-section">
          <h2 style="color: #052ed8; font-size: 18pt; margin-bottom: 15px;">Ø§Ù„Ø´ØºÙ Ø§Ù„Ù…ÙØ¯Ø®Ù„</h2>
          <div id="print-passions-content"></div>
        </div>
        <div id="print-answers" class="print-section">
          <h2 style="color: #052ed8; font-size: 18pt; margin-bottom: 15px;">Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø±Ø§Ø­Ù„ Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h2>
          <div id="print-answers-content"></div>
        </div>
        <div id="print-results" class="print-section">
          <h2 style="color: #052ed8; font-size: 18pt; margin-bottom: 15px;">Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h2>
          <div id="print-results-content"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- SVG Icons -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="icon-pencil" viewBox="0 0 24 24">
      <path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" />
    </symbol>
    <symbol id="icon-trash" viewBox="0 0 24 24">
      <path d="M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19V4Z" />
    </symbol>
    <symbol id="icon-arrow-up" viewBox="0 0 24 24">
      <path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" />
    </symbol>
    <symbol id="icon-arrow-down" viewBox="0 0 24 24">
      <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z" />
    </symbol>
  </svg>

  <script>
    // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    const passions = [];
    const stages = ['Purpose', 'Problems', 'Power', 'Proof', 'Possible'];
    const guidingQuestions = {
      Purpose: 'Ù…Ø§ Ø§Ù„ØºØ±Ø¶ Ø£Ùˆ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙØŸ ÙƒÙŠÙ ÙŠØ¤Ø«Ø± Ø¥ÙŠØ¬Ø§Ø¨ÙŠÙ‹Ø§ Ø¹Ù„Ù‰ Ø­ÙŠØ§ØªÙƒ Ø£Ùˆ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŸ',
      Problems: 'Ù…Ø§ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø£Ùˆ Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª Ø§Ù„ØªÙŠ Ù‚Ø¯ ØªÙˆØ§Ø¬Ù‡Ù‡Ø§ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙØŸ Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠÙ‚Ù„Ù‚ÙƒØŸ',
      Power: 'Ù…Ø§ Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆØ© Ø£Ùˆ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙŠ ØªÙ…ØªÙ„ÙƒÙ‡Ø§ ØªØ¯Ø¹Ù… Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙØŸ',
      Proof: 'Ù…Ø§ Ø§Ù„Ø£Ø¯Ù„Ø© Ø£Ùˆ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„ØªÙŠ ØªØ«Ø¨Øª Ù‚Ø¯Ø±ØªÙƒ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¬Ø§Ø­ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙØŸ',
      Possible: 'Ù…Ø§ Ø§Ù„ÙØ±Øµ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ© Ø§Ù„ØªÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙØªØ­Ù‡Ø§ Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙØŸ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØªØ·ÙˆØ±ØŸ'
    };

    // Ù†ØµØ§Ø¦Ø­ Ù„ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©
    const stageHints = {
      Purpose: [
        'ÙÙƒØ± ÙÙŠ Ø§Ù„Ù‡Ø¯Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ: Ù„Ù…Ø§Ø°Ø§ ØªØ­Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠØ¯ÙØ¹Ùƒ Ø¥Ù„ÙŠÙ‡ØŸ',
        'Ø§ÙƒØªØ¨ Ø¹Ù† Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠ: ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙÙŠØ¯ Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ø£Ùˆ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ØŸ',
        'Ø­Ø¯Ø¯ Ø§Ù„Ù‚ÙŠÙ…: Ù…Ø§ Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„ØªÙŠ ÙŠØ­Ù‚Ù‚Ù‡Ø§ Ù„Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙØŸ'
      ],
      Problems: [
        'ÙÙƒØ± ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©: Ù‡Ù„ ÙŠØ­ØªØ§Ø¬ Ø§Ø³ØªØ«Ù…Ø§Ø± ÙƒØ¨ÙŠØ±ØŸ Ù‡Ù„ Ø§Ù„Ø¯Ø®Ù„ Ù…Ø³ØªÙ‚Ø±ØŸ',
        'Ø§Ø°ÙƒØ± Ø§Ù„Ø¹Ù‚Ø¨Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©: Ù…Ø§ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ ØªØ·ÙˆÙŠØ±Ù‡Ø§ØŸ',
        'Ø­Ø¯Ø¯ Ø§Ù„Ù…Ø®Ø§Ø·Ø±: Ù…Ø§ Ø£ÙƒØ¨Ø± Ø§Ù„Ù…Ø®Ø§ÙˆÙ Ø§Ù„ØªÙŠ ØªÙˆØ§Ø¬Ù‡Ùƒ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ'
      ],
      Power: [
        'Ø§Ø°ÙƒØ± Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: Ù…Ø§ Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙŠ ØªÙ…ØªÙ„ÙƒÙ‡Ø§ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ',
        'Ø­Ø¯Ø¯ Ù†Ù‚Ø§Ø· Ù‚ÙˆØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©: Ø§Ù„ØµØ¨Ø±ØŒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ØŒ Ø§Ù„ØªÙˆØ§ØµÙ„ØŒ Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©ØŒ Ø¥Ù„Ø®',
        'Ø§ÙƒØªØ¨ Ø¹Ù† Ø®Ø¨Ø±Ø§ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©: Ø£ÙŠ ØªØ¬Ø§Ø±Ø¨ Ø³Ø§Ø¨Ù‚Ø© ØªØ¯Ø¹Ù… Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙØŸ'
      ],
      Proof: [
        'Ø§Ø°ÙƒØ± Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙƒ: Ø£ÙŠ Ù…Ø´Ø§Ø±ÙŠØ¹ Ø£Ùˆ Ø£Ø¹Ù…Ø§Ù„ Ù‚Ù…Øª Ø¨Ù‡Ø§ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ',
        'Ø­Ø¯Ø¯ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø£Ùˆ Ø§Ù„Ø¯ÙˆØ±Ø§Øª: Ø£ÙŠ ØªØ¹Ù„ÙŠÙ… Ø±Ø³Ù…ÙŠ Ø£Ùˆ ØºÙŠØ± Ø±Ø³Ù…ÙŠ Ø­ØµÙ„Øª Ø¹Ù„ÙŠÙ‡ØŸ',
        'Ø§ÙƒØªØ¨ Ø¹Ù† Ø§Ù„ØªÙ‚Ø¯ÙŠØ±: Ø£ÙŠ Ù…Ø¯Ø­ Ø£Ùˆ ØªÙ‚Ø¯ÙŠØ± Ø­ØµÙ„Øª Ø¹Ù„ÙŠÙ‡ Ù…Ù† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŸ'
      ],
      Possible: [
        'ÙÙƒØ± ÙÙŠ Ø§Ù„ÙØ±Øµ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©: Ù…Ø§ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø£Ùˆ Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ Ø§Ù„Ù…ØªØ§Ø­Ø©ØŸ',
        'Ø­Ø¯Ø¯ Ø¥Ù…ÙƒØ§Ù†ÙŠØ§Øª Ø§Ù„Ù†Ù…Ùˆ: ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† ØªØ·ÙˆÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ø´ØºÙ Ù…Ø¹ Ø§Ù„ÙˆÙ‚ØªØŸ',
        'Ø§ÙƒØªØ¨ Ø¹Ù† Ø§Ù„Ø§ØªØ¬Ø§Ù‡Ø§Øª: Ù…Ø§ Ø§Ù„ØªØ·ÙˆØ±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ØŸ'
      ]
    };
    
    let currentPassionIndex = 0;
    let currentStageIndex = 0;
    let previousPassionIndex = -1;
    const answers = {};
    const userPriorities = {};
    let currentStep = "selection"; // selection, questions, results

    // Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
    const passionInput = document.getElementById('passion-input');
    const addPassionBtn = document.getElementById('add-passion');
    const passionError = document.getElementById('passion-error');
    const passionList = document.getElementById('passion-list');
    const startJourneyBtn = document.getElementById('start-journey');
    const passionSelection = document.getElementById('passion-selection');
    const questionSection = document.getElementById('question-section');
    const resultsSection = document.getElementById('results-section');
    const currentPassionEl = document.getElementById('current-passion');
    const currentStageEl = document.getElementById('current-stage');
    const guidingQuestionEl = document.getElementById('guiding-question');
    const questionInputs = document.getElementById('question-inputs');
    const questionError = document.getElementById('question-error');
    const addInputBtn = document.getElementById('add-input');
    const prevQuestionBtn = document.getElementById('prev-question');
    const nextQuestionBtn = document.getElementById('next-question');
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');
    const remainingText = document.getElementById('remaining-text');
    const resultsTable = document.getElementById('results-table');
    const userPriorityTable = document.getElementById('user-priority-table');
    const recommendation = document.getElementById('recommendation');
    const restartTestBtn = document.getElementById('restart-test');
    const downloadReportBtn = document.getElementById('download-report');
    const printReportBtn = document.getElementById('print-report');
    const toast = document.getElementById('toast');
    const restoreModal = document.getElementById('restore-modal');

    // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
    function showModal(modalId) {
      document.getElementById(modalId).classList.add('active');
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
    }

    // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
    function showToast(message, duration = 3000) {
      toast.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, duration);
    }

    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ localStorage
    function saveData() {
      const data = {
        passions: passions,
        userPriorities: userPriorities,
        answers: answers,
        currentPassionIndex: currentPassionIndex,
        currentStageIndex: currentStageIndex,
        currentStep: currentStep
      };
      
      localStorage.setItem('6ps_journey_data', JSON.stringify(data));
    }

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©
    function checkSavedData() {
      const savedData = localStorage.getItem('6ps_journey_data');
      if (savedData) {
        const data = JSON.parse(savedData);
        if (data.passions && data.passions.length > 0) {
          showModal('restore-modal');
          return true;
        }
      }
      return false;
    }

    // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
    function restoreSavedData() {
      const savedData = localStorage.getItem('6ps_journey_data');
      if (savedData) {
        const data = JSON.parse(savedData);
        
        // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        data.passions.forEach(p => passions.push(p));
        Object.assign(userPriorities, data.userPriorities);
        Object.assign(answers, data.answers);
        currentPassionIndex = data.currentPassionIndex;
        currentStageIndex = data.currentStageIndex;
        currentStep = data.currentStep;
        
        // Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
        if (currentStep === "questions") {
          passionSelection.classList.add('hidden');
          questionSection.classList.remove('hidden');
          resultsSection.classList.add('hidden');
          showQuestion();
        } else if (currentStep === "results") {
          passionSelection.classList.add('hidden');
          questionSection.classList.add('hidden');
          resultsSection.classList.remove('hidden');
          showResults();
        } else {
          updatePassionSelection();
        }
        
        closeModal('restore-modal');
        showToast('ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­');
      }
    }

    // Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙˆØ¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯
    function clearSavedData() {
      localStorage.removeItem('6ps_journey_data');
      closeModal('restore-modal');
      showToast('ØªÙ… Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯');
    }

    // Ø¥Ø¯Ø§Ø±Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø´ØºÙ
    function updatePassionSelection() {
      const passionCount = passions.length;
      startJourneyBtn.disabled = passionCount !== 6;
      passionInput.disabled = passionCount >= 6;
      addPassionBtn.disabled = passionCount >= 6;
      renderPassionList();
      
      // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      currentStep = "selection";
      saveData();
    }

    // Ø¥Ø¶Ø§ÙØ© Ø´ØºÙ Ø¬Ø¯ÙŠØ¯
    addPassionBtn.addEventListener('click', () => {
      const value = passionInput.value.trim();

      if (value && passions.length < 6 && !passions.includes(value)) {
        passions.push(value);
        userPriorities[value] = 6 - passions.length + 1;
        passionInput.value = '';
        passionError.style.display = 'none';
        updatePassionSelection();
      } else {
        passionError.style.display = 'block';
        setTimeout(() => {
          passionError.style.display = 'none';
        }, 3000);
      }
    });

    // Ø¥Ø¶Ø§ÙØ© Ø´ØºÙ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
    passionInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        addPassionBtn.click();
      }
    });

    // Ø¹Ø±Ø¶ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø´ØºÙ
    function renderPassionList() {
      passionList.innerHTML = '';
      for (let i = 0; i < 6; i++) {
        const passion = passions[i] || '';
        const priority = passion ? userPriorities[passion] : '-';
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${passion || '-'}</td>
          <td>${priority}</td>
          <td>
            ${passion ? `
              <div class="table-actions">
                <button class="action-button" onclick="editPassion(${i})" title="ØªØ¹Ø¯ÙŠÙ„">
                  <svg class="icon"><use xlink:href="#icon-pencil"></use></svg>
                </button>
                <button class="action-button delete-button" onclick="deletePassion(${i})" title="Ø­Ø°Ù">
                  <svg class="icon"><use xlink:href="#icon-trash"></use></svg>
                </button>
                <button class="action-button" ${i === 0 ? 'disabled' : ''} onclick="movePassion(${i}, -1)" title="Ù„Ø£Ø¹Ù„Ù‰">
                  <svg class="icon"><use xlink:href="#icon-arrow-up"></use></svg>
                </button>
                <button class="action-button" ${i === passions.length - 1 ? 'disabled' : ''} onclick="movePassion(${i}, 1)" title="Ù„Ø£Ø³ÙÙ„">
                  <svg class="icon"><use xlink:href="#icon-arrow-down"></use></svg>
                </button>
              </div>
            ` : '-'}
          </td>
        `;
        passionList.appendChild(row);
      }
    }

    // ØªØ¹Ø¯ÙŠÙ„ Ø´ØºÙ
    window.editPassion = function(index) {
      const passion = passions[index];
      const newValue = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø´ØºÙ Ø§Ù„Ø¬Ø¯ÙŠØ¯:', passion);

      if (newValue && newValue.trim() && !passions.includes(newValue.trim())) {
        delete userPriorities[passion];
        passions[index] = newValue.trim();
        userPriorities[newValue.trim()] = 6 - index;
        updatePassionSelection();
      } else if (newValue) {
        alert('Ø®Ø·Ø£: Ø§Ù„Ø§Ø³Ù… ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ Ù…ÙƒØ±Ø±!');
      }
    };

    // Ù…Ø³Ø­ Ø´ØºÙ
    window.deletePassion = function(index) {
      const passion = passions[index];
      delete userPriorities[passion];
      passions.splice(index, 1);
      reassignPriorities();
      updatePassionSelection();
    };

    // Ù†Ù‚Ù„ Ø´ØºÙ Ù„Ø£Ø¹Ù„Ù‰ Ø£Ùˆ Ù„Ø£Ø³ÙÙ„
    window.movePassion = function(index, direction) {
      const newIndex = index + direction;
      if (newIndex >= 0 && newIndex < passions.length) {
        [passions[index], passions[newIndex]] = [passions[newIndex], passions[index]];
        reassignPriorities();
        updatePassionSelection();
      }
    };

    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª
    function reassignPriorities() {
      const newPriorities = {};
      passions.forEach((passion, index) => {
        newPriorities[passion] = 6 - index;
      });
      Object.assign(userPriorities, newPriorities);
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„Ø±Ø­Ù„Ø©
    startJourneyBtn.addEventListener('click', () => {
      if (passions.length !== 6) {
        alert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ 6 Ø´ØºÙ Ø¨Ø§Ù„Ø¶Ø¨Ø·!');
        return;
      }
      passions.forEach(p => {
        if (!answers[p]) {
          answers[p] = { Purpose: [], Problems: [], Power: [], Proof: [], Possible: [] };
        }
      });
      passionSelection.classList.add('hidden');
      questionSection.classList.remove('hidden');
      previousPassionIndex = -1;
      currentStep = "questions";
      showQuestion();
    });

    // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ
    function showQuestion() {
      const passion = passions[currentPassionIndex];
      const stage = stages[currentStageIndex];
      const totalQuestions = passions.length * stages.length;
      const currentQuestion = currentPassionIndex * stages.length + currentStageIndex + 1;
      const remainingQuestions = totalQuestions - currentQuestion;

      // Ø¥Ø¸Ù‡Ø§Ø± Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø´ØºÙ Ø¬Ø¯ÙŠØ¯
      if (currentPassionIndex !== previousPassionIndex) {
        showToast(`Ø§Ù„Ø¢Ù† ØªØ¬ÙŠØ¨ Ø¹Ù„Ù‰ Ø£Ø³Ø¦Ù„Ø©: ${passion}`);
        previousPassionIndex = currentPassionIndex;
      }

      // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
      progressBar.style.width = `${(currentQuestion / totalQuestions) * 100}%`;
      progressText.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ ${currentQuestion} Ù…Ù† ${totalQuestions}`;
      remainingText.textContent = `Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${remainingQuestions}`;

      currentPassionEl.textContent = `Ø§Ù„Ø´ØºÙ: ${passion}`;
      currentStageEl.textContent = `Ø§Ù„Ù…Ø±Ø­Ù„Ø©: ${stage}`;
      guidingQuestionEl.textContent = guidingQuestions[stage];

      questionInputs.innerHTML = '';
      const currentAnswers = answers[passion][stage];
      const inputCount = currentAnswers.length || 3;

      for (let i = 0; i < inputCount; i++) {
        addInputField(questionInputs, currentAnswers[i]?.text || '', currentAnswers[i]?.rating || 0, stage, i);
      }

      addInputBtn.disabled = inputCount >= 6;
      prevQuestionBtn.disabled = currentQuestion === 1;
      
      // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
      saveData();
    }

    // Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„
    function addInputField(container, text = '', rating = 0, stage, index) {
      const div = document.createElement('div');
      div.className = 'input-group';
      
      const inputWrapper = document.createElement('div');
      inputWrapper.className = 'input-wrapper';
      
      const input = document.createElement('input');
      input.type = 'text';
      input.className = 'input';
      input.value = text;
      input.placeholder = 'Ø£Ø¯Ø®Ù„ Ø¥Ø¬Ø§Ø¨ØªÙƒ';
      inputWrapper.appendChild(input);
      
      // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„Ù†ØµÙŠØ­Ø©
      const hintButton = document.createElement('button');
      hintButton.className = 'hint-button';
      hintButton.type = 'button';
      hintButton.innerHTML = 'ğŸ’¡';
      
      const hintTooltip = document.createElement('div');
      hintTooltip.className = 'hint-tooltip';
      
      // Ø§Ø®ØªÙŠØ§Ø± Ù†ØµÙŠØ­Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
      const hints = stageHints[stage];
      const randomHint = hints[Math.floor(Math.random() * hints.length)];
      hintTooltip.textContent = randomHint;
      
      hintButton.appendChild(hintTooltip);
      inputWrapper.appendChild(hintButton);
      div.appendChild(inputWrapper);
      
      const isProblems = stage === 'Problems';
      const selectLabel = document.createElement('label');
      selectLabel.textContent = isProblems ? 'Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù‚Ù„Ù‚:' : 'Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø§Ù‚ØªÙ†Ø§Ø¹:';
      selectLabel.style.minWidth = '100px';
      selectLabel.style.fontWeight = '500';
      div.appendChild(selectLabel);
      
      const select = document.createElement('select');
      select.className = 'select';
      
      const options = [
        { value: '', label: 'Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰' },
        { value: isProblems ? '-2' : '2', label: 'Ø¨Ø³ÙŠØ·' },
        { value: isProblems ? '-4' : '4', label: 'Ù…ØªÙˆØ³Ø·' },
        { value: isProblems ? '-6' : '6', label: 'Ø¹Ø§Ù„ÙŠ' }
      ];
      
      options.forEach(option => {
        const optionEl = document.createElement('option');
        optionEl.value = option.value;
        optionEl.textContent = option.label;
        if (rating.toString() === option.value) {
          optionEl.selected = true;
        }
        select.appendChild(optionEl);
      });
      
      div.appendChild(select);
      
      if (index >= 3) {
        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'button button-outline';
        deleteBtn.style.padding = '0.5rem';
        deleteBtn.style.minWidth = 'auto';
        deleteBtn.innerHTML = '<svg class="icon"><use xlink:href="#icon-trash"></use></svg>';
        deleteBtn.onclick = function() {
          deleteInputField(this);
        };
        div.appendChild(deleteBtn);
      }
      
      container.appendChild(div);
    }

    // Ù…Ø³Ø­ Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„
    window.deleteInputField = function(button) {
      if (questionInputs.children.length > 3) {
        button.parentElement.remove();
        addInputBtn.disabled = questionInputs.children.length >= 6;
      }
    };

    // Ø¥Ø¶Ø§ÙØ© Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ø¯ÙŠØ¯
    addInputBtn.addEventListener('click', () => {
      if (questionInputs.children.length < 6) {
        addInputField(questionInputs, '', 0, stages[currentStageIndex], questionInputs.children.length);
        addInputBtn.disabled = questionInputs.children.length >= 6;
      }
    });

    // Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚
    prevQuestionBtn.addEventListener('click', () => {
      if (currentStageIndex > 0) {
        currentStageIndex--;
      } else if (currentPassionIndex > 0) {
        currentPassionIndex--;
        currentStageIndex = stages.length - 1;
      }
      showQuestion();
    });

    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
    nextQuestionBtn.addEventListener('click', () => {
      const passion = passions[currentPassionIndex];
      const stage = stages[currentStageIndex];
      const inputGroups = questionInputs.querySelectorAll('.input-group');
      const newAnswers = [];

      let valid = true;
      inputGroups.forEach(group => {
        const text = group.querySelector('input').value.trim();
        const select = group.querySelector('select');
        const rating = select.value;
        
        if (text && rating) {
          newAnswers.push({ text, rating: parseInt(rating) });
        } else {
          valid = false;
        }
      });

      if (!valid) {
        questionError.style.display = 'block';
        setTimeout(() => {
          questionError.style.display = 'none';
        }, 3000);
        return;
      }

      answers[passion][stage] = newAnswers;

      currentStageIndex++;
      if (currentStageIndex >= stages.length) {
        currentStageIndex = 0;
        currentPassionIndex++;
      }
      if (currentPassionIndex >= passions.length) {
        currentStep = "results";
        saveData();
        showResults();
      } else {
        showQuestion();
      }
    });

    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    function showResults() {
      questionSection.classList.add('hidden');
      resultsSection.classList.remove('hidden');
      resultsTable.innerHTML = '';

      let passionResults = [];

      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
      passions.forEach(passion => {
        const stageSums = stages.map(stage => 
          answers[passion][stage].reduce((sum, ans) => sum + parseInt(ans.rating), 0)
        );
        const total = stageSums.reduce((sum, val) => sum + val, 0);
        
        passionResults.push({
          passion: passion,
          stageSums: stageSums,
          total: total
        });
      });

      // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„
      passionResults.sort((a, b) => b.total - a.total);

      // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø±ØªØ¨Ø©
      passionResults.forEach((result, index) => {
        const row = document.createElement('tr');
        // Ø¥Ø¶Ø§ÙØ© ÙƒÙ„Ø§Ø³ Ù„Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø£ÙØ¶Ù„
        if (index === 0) {
          row.classList.add('best-result');
        }
        row.innerHTML = `
          <td>${result.passion}</td>
          ${result.stageSums.map(p => `<td>${p}</td>`).join('')}
          <td style="font-weight: bold;">${result.total}</td>
        `;
        resultsTable.appendChild(row);
      });

      const topPassion = passionResults[0];
      recommendation.innerHTML = `
        <div>
          <h3 style="color: var(--green); margin-bottom: 10px;">ğŸ¯ Ø§Ù„Ø´ØºÙ Ø§Ù„Ù…Ù‚ØªØ±Ø­</h3>
          <p style="font-size: 1.3em; font-weight: bold; color: var(--primary);">${topPassion.passion}</p>
          <p style="color: var(--text-light); margin-top: 5px;">Ø¨Ø¥Ø¬Ù…Ø§Ù„ÙŠ ${topPassion.total} Ù†Ù‚Ø·Ø©</p>
        </div>
      `;

      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©
      const hint = generatePersonalHint(topPassion.passion);
      if (hint) {
        const hintElement = document.createElement('div');
        hintElement.className = 'result-highlight';
        hintElement.style.marginTop = '1.5rem';
        hintElement.style.background = '#fff3cd';
        hintElement.style.borderColor = 'var(--yellow)';
        hintElement.innerHTML = `
          <div>
            <h3 style="color: var(--yellow); margin-bottom: 10px;">ğŸ’¡ Ù†ØµÙŠØ­Ø© Ø´Ø®ØµÙŠØ©</h3>
            <p style="font-size: 1em; line-height: 1.6; color: var(--text);">${hint}</p>
          </div>
        `;
        recommendation.parentNode.insertBefore(hintElement, recommendation.nextSibling);
      }

      // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ©
      userPriorityTable.innerHTML = '';
      const sortedPassions = [...passions].sort((a, b) => userPriorities[b] - userPriorities[a]);
      sortedPassions.forEach(passion => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${passion}</td>
          <td>${userPriorities[passion]}</td>
        `;
        userPriorityTable.appendChild(row);
      });

      // ØªØ­Ø¶ÙŠØ± Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
      preparePrintContent();
    }

    // Ø¯Ø§Ù„Ø© Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©
    function generatePersonalHint(topPassion) {
      const purposeAnswers = answers[topPassion]['Purpose'];
      
      // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£ÙˆÙ„ Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ù…Ø³ØªÙˆÙ‰ Ø¹Ø§Ù„ÙŠ (6 Ù†Ù‚Ø§Ø·) ÙÙŠ Purpose
      const highPurposeAnswer = purposeAnswers.find(answer => parseInt(answer.rating) === 6);
      
      if (highPurposeAnswer) {
        return `Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒØŒ Ø£Ù†Øª Ù…Ù†Ø§Ø³Ø¨ Ø¬Ø¯Ø§Ù‹ Ù„Ù…Ø¬Ø§Ù„ "${topPassion}" Ù„Ø£Ù†Ùƒ Ø°ÙƒØ±Øª: "${highPurposeAnswer.text}". Ù‡Ø°Ø§ ÙŠÙØ¸Ù‡Ø± ÙˆØ¶ÙˆØ­ Ø±Ø¤ÙŠØªÙƒ ÙˆÙ‚ÙˆØ© Ø¯Ø§ÙØ¹ÙŠØªÙƒ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„. Ù†Ù†ØµØ­Ùƒ Ø¨Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ ØªØ·ÙˆÙŠØ± Ù…Ù‡Ø§Ø±Ø§ØªÙƒ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ ÙˆØ§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙØ±Øµ Ø§Ù„ØªÙŠ ØªØªÙ…Ø§Ø´Ù‰ Ù…Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ù‡Ø¯Ù.`;
      }
      
      // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ù…Ø³ØªÙˆÙ‰ Ø¹Ø§Ù„ÙŠØŒ Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙˆÙ„ Ø¥Ø¬Ø§Ø¨Ø© Ø¨Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙˆØ³Ø·
      const mediumPurposeAnswer = purposeAnswers.find(answer => parseInt(answer.rating) === 4);
      
      if (mediumPurposeAnswer) {
        return `Ø£Ù†Øª ØªÙØ¸Ù‡Ø± Ø§Ù‡ØªÙ…Ø§Ù…Ø§Ù‹ ÙˆØ§Ø¶Ø­Ø§Ù‹ Ø¨Ù…Ø¬Ø§Ù„ "${topPassion}" Ø®Ø§ØµØ© ÙÙŠÙ…Ø§ ÙŠØªØ¹Ù„Ù‚ Ø¨Ù€ "${mediumPurposeAnswer.text}". Ù†Ù†ØµØ­Ùƒ Ø¨Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ Ø§Ø³ØªÙƒØ´Ø§Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ ÙˆØªØ·ÙˆÙŠØ± ÙÙ‡Ù…Ùƒ Ù„Ù‡ Ø£ÙƒØ«Ø±.`;
      }
      
      // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…Ù†Ø§Ø³Ø¨Ø©ØŒ Ø£Ø¹Ø·Ù Ù†ØµÙŠØ­Ø© Ø¹Ø§Ù…Ø©
      return `Ù…Ø¬Ø§Ù„ "${topPassion}" ÙŠØ¨Ø¯Ùˆ Ø§Ù„Ø£Ù†Ø³Ø¨ Ù„Ùƒ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ. Ù†Ù†ØµØ­Ùƒ Ø¨Ø§Ù„ØªØ¹Ù…Ù‚ Ø£ÙƒØ«Ø± ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¬Ø§Ù„ ÙˆØ§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„ÙØ±Øµ Ø§Ù„Ù…ØªØ§Ø­Ø© ÙÙŠÙ‡.`;
    }

    // ØªØ­Ø¶ÙŠØ± Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
    function preparePrintContent() {
      // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´ØºÙ
      const printPassionsContent = document.getElementById('print-passions-content');
      printPassionsContent.innerHTML = '';
      const passionsTable = document.createElement('table');
      
      let passionsHtml = '<tr><th>Ø§Ù„Ø´ØºÙ</th><th>Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ØµÙ„ÙŠ</th></tr>';
      
      passions.forEach(passion => {
        passionsHtml += `<tr><td>${passion}</td><td>${userPriorities[passion]}</td></tr>`;
      });
      
      passionsTable.innerHTML = passionsHtml;
      printPassionsContent.appendChild(passionsTable);
      
      // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      const printAnswersContent = document.getElementById('print-answers-content');
      printAnswersContent.innerHTML = '';

      // Ø­Ø³Ø§Ø¨ ÙˆØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      let passionResults = [];
      passions.forEach(passion => {
        const stageSums = stages.map(stage => 
          answers[passion][stage].reduce((sum, ans) => sum + parseInt(ans.rating), 0)
        );
        const total = stageSums.reduce((sum, val) => sum + val, 0);
        
        passionResults.push({
          passion: passion,
          stageSums: stageSums,
          total: total
        });
      });

      // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„
      passionResults.sort((a, b) => b.total - a.total);

      passionResults.forEach((result, index) => {
        const passionDiv = document.createElement('div');
        passionDiv.className = 'print-passion-section';
        
        const passionTitle = document.createElement('h3');
        passionTitle.className = 'print-passion-title';
        passionTitle.textContent = `${index + 1}. Ø§Ù„Ø´ØºÙ: ${result.passion}`;
        passionDiv.appendChild(passionTitle);
        
        stages.forEach(stage => {
          const stageDiv = document.createElement('div');
          stageDiv.className = 'print-stage-section';
          
          const stageTitle = document.createElement('h4');
          stageTitle.className = 'print-stage-title';
          stageTitle.textContent = stage;
          stageDiv.appendChild(stageTitle);
          
          const questionP = document.createElement('p');
          questionP.className = 'print-question';
          questionP.textContent = `Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ÙŠ: ${guidingQuestions[stage]}`;
          stageDiv.appendChild(questionP);
          
          const answersList = document.createElement('ul');
          answersList.className = 'print-answers';
          
          // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
          const sortedAnswers = [...answers[result.passion][stage]].sort((a, b) => {
            if (stage === 'Problems') {
              return parseInt(b.rating) - parseInt(a.rating);
            }
            return parseInt(b.rating) - parseInt(a.rating);
          });
          
          sortedAnswers.forEach(answer => {
            const answerItem = document.createElement('li');
            answerItem.className = 'print-answer-item';
            answerItem.textContent = `${answer.text} (Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${answer.rating})`;
            answersList.appendChild(answerItem);
          });
          
          stageDiv.appendChild(answersList);
          passionDiv.appendChild(stageDiv);
        });

        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
        const totalDiv = document.createElement('div');
        totalDiv.className = 'print-total';
        totalDiv.textContent = `Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${result.total} Ù†Ù‚Ø·Ø©`;
        passionDiv.appendChild(totalDiv);
        
        printAnswersContent.appendChild(passionDiv);
      });
      
      // Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      const printResultsContent = document.getElementById('print-results-content');
      printResultsContent.innerHTML = '';

      const resultsTable = document.createElement('table');
      
      let resultsHtml = '<tr><th>Ø§Ù„ØªØ±ØªÙŠØ¨</th><th>Ø§Ù„Ø´ØºÙ</th>';
      stages.forEach(stage => {
        resultsHtml += `<th>${stage}</th>`;
      });
      resultsHtml += '<th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th></tr>';

      // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ø±ØªØ¨Ø©
      passionResults.forEach((result, index) => {
        const rowClass = index === 0 ? 'class="best-result"' : '';
        resultsHtml += `<tr ${rowClass}><td>${index + 1}</td><td>${result.passion}</td>`;
        result.stageSums.forEach(sum => {
          resultsHtml += `<td>${sum}</td>`;
        });
        resultsHtml += `<td>${result.total}</td></tr>`;
      });

      resultsTable.innerHTML = resultsHtml;
      printResultsContent.appendChild(resultsTable);

      const topPassion = passionResults[0];
      const recommendationDiv = document.createElement('div');
      recommendationDiv.className = 'print-recommendation';
      recommendationDiv.innerHTML = `
        <h3>ğŸ¯ Ø§Ù„ØªÙˆØµÙŠØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h3>
        <p>Ø§Ù„Ø´ØºÙ Ø§Ù„Ù…Ù‚ØªØ±Ø­: ${topPassion.passion}</p>
        <p>Ø¨Ø¥Ø¬Ù…Ø§Ù„ÙŠ ${topPassion.total} Ù†Ù‚Ø·Ø©</p>
      `;
      printResultsContent.appendChild(recommendationDiv);

      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©
      const hint = generatePersonalHint(topPassion.passion);
      if (hint) {
        const hintDiv = document.createElement('div');
        hintDiv.className = 'print-hint';
        hintDiv.innerHTML = `
          <h3>ğŸ’¡ Ù†ØµÙŠØ­Ø© Ø´Ø®ØµÙŠØ©</h3>
          <p>${hint}</p>
        `;
        printResultsContent.appendChild(hintDiv);
      }
    }

    // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ±
    printReportBtn.addEventListener('click', () => {
      window.print();
    });

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
    downloadReportBtn.addEventListener('click', () => {
      // Ø¥Ù†Ø´Ø§Ø¡ Ù†Øµ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
      let reportText = "ØªÙ‚Ø±ÙŠØ± Ø±Ø­Ù„Ø© 6Ps - Ø§ÙƒØªØ´Ù Ù…ÙŠÙˆÙ„Ùƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ©\n";
      reportText += "=" .repeat(50) + "\n\n";
      
      // Ø­Ø³Ø§Ø¨ ÙˆØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
      let passionResults = [];
      passions.forEach(passion => {
        const stageSums = stages.map(stage => 
          answers[passion][stage].reduce((sum, ans) => sum + parseInt(ans.rating), 0)
        );
        const total = stageSums.reduce((sum, val) => sum + val, 0);
        
        passionResults.push({
          passion: passion,
          stageSums: stageSums,
          total: total
        });
      });

      // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„
      passionResults.sort((a, b) => b.total - a.total);

      // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
      passionResults.forEach((result, index) => {
        reportText += `${index + 1}. Ø§Ù„Ø´ØºÙ: ${result.passion}\n`;
        reportText += "-".repeat(30) + "\n\n";
        
        stages.forEach(stage => {
          reportText += `${stage}:\n`;
          reportText += `Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ÙŠ: ${guidingQuestions[stage]}\n`;
          
          // ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„)
          const sortedAnswers = [...answers[result.passion][stage]].sort((a, b) => {
            // Ù„Ù„Ù€ Problems Ù†Ø±ØªØ¨ Ù…Ù† Ø§Ù„Ø£Ù‚Ù„ Ø³Ù„Ø¨ÙŠØ© Ù„Ù„Ø£ÙƒØ«Ø± Ø³Ù„Ø¨ÙŠØ© (Ø§Ù„Ø£Ù‚Ù„ Ù‚Ù„Ù‚Ø§Ù‹ Ø£ÙˆÙ„Ø§Ù‹)
            if (stage === 'Problems') {
              return parseInt(b.rating) - parseInt(a.rating); // Ù…Ù† -2 Ø¥Ù„Ù‰ -6
            }
            // Ù„Ù„Ø¨Ø§Ù‚ÙŠ Ù†Ø±ØªØ¨ Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ù„Ø£Ù‚Ù„
            return parseInt(b.rating) - parseInt(a.rating);
          });
          
          sortedAnswers.forEach(answer => {
            reportText += `- ${answer.text} (Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${answer.rating})\n`;
          });
          reportText += "\n";
        });
        
        reportText += `Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${result.total} Ù†Ù‚Ø·Ø©\n`;
        reportText += "=".repeat(50) + "\n\n";
      });
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙˆØµÙŠØ© ÙˆØ§Ù„Ù†ØµÙŠØ­Ø©
      const topPassion = passionResults[0];
      reportText += "Ø§Ù„ØªÙˆØµÙŠØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:\n";
      reportText += "-".repeat(20) + "\n";
      reportText += `Ø§Ù„Ø´ØºÙ Ø§Ù„Ù…Ù‚ØªØ±Ø­: ${topPassion.passion} (Ø¨Ø¥Ø¬Ù…Ø§Ù„ÙŠ ${topPassion.total} Ù†Ù‚Ø·Ø©)\n\n`;
      
      // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†ØµÙŠØ­Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©
      const hint = generatePersonalHint(topPassion.passion);
      if (hint) {
        reportText += "Ù†ØµÙŠØ­Ø© Ø´Ø®ØµÙŠØ©:\n";
        reportText += "-".repeat(15) + "\n";
        reportText += `${hint}\n\n`;
      }
      
      reportText += "Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø°ÙŠ Ø§Ø®ØªØ±ØªÙ‡ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:\n";
      reportText += "-".repeat(35) + "\n";
      const sortedPassions = [...passions].sort((a, b) => userPriorities[b] - userPriorities[a]);
      sortedPassions.forEach((passion, index) => {
        reportText += `${index + 1}. ${passion} (Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©: ${userPriorities[passion]})\n`;
      });
      
      // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ù†ØµÙŠ Ù„Ù„ØªØ­Ù…ÙŠÙ„
      const blob = new Blob([reportText], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = '6Ps_Report.txt';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });

    // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
    restartTestBtn.addEventListener('click', () => {
      if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø±ØºØ¨ØªÙƒ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±ØŸ Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©.')) {
        localStorage.removeItem('6ps_journey_data');
        location.reload();
      }
    });

    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø© Ø£Ùˆ ØªØ­Ø¯ÙŠØ«Ù‡Ø§
    window.addEventListener('beforeunload', () => {
      saveData();
    });

    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.addEventListener('load', () => {
      if (!checkSavedData()) {
        // Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©ØŒ Ø§Ø¨Ø¯Ø£ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ø¯ÙŠØ¯
        updatePassionSelection();
      }
    });
  </script>
</body>
</html>
